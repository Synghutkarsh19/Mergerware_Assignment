[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar ServiceConfiguration = Package['service-configuration'].ServiceConfiguration;\nvar Accounts = Package['accounts-base'].Accounts;\nvar Template = Package['templating-runtime'].Template;\nvar Session = Package.session.Session;\nvar meteorInstall = Package.modules.meteorInstall;\nvar Promise = Package.promise.Promise;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"accounts-ui-unstyled\":{\"accounts_ui.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/accounts_ui.js                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  passwordSignupFields: () => passwordSignupFields,\n  passwordlessSignupFields: () => passwordlessSignupFields\n});\n/**\n * @summary Accounts UI\n * @namespace\n * @memberOf Accounts\n * @importFromPackage accounts-base\n */\nAccounts.ui = {\n  _options: {\n    requestPermissions: Object.create(null),\n    requestOfflineToken: Object.create(null),\n    forceApprovalPrompt: Object.create(null)\n  }\n};\nconst VALID_OPTIONS = new Set().add('passwordSignupFields').add('requestPermissions').add('requestOfflineToken').add('forceApprovalPrompt').add('passwordlessSignupFields');\nconst VALID_PASSWORD_SIGNUP_FIELDS = new Set().add('USERNAME_AND_EMAIL').add('USERNAME_AND_OPTIONAL_EMAIL').add('USERNAME_ONLY').add('EMAIL_ONLY');\nfunction isValidPasswordSignupField(field) {\n  return VALID_PASSWORD_SIGNUP_FIELDS.has(field);\n}\nconst VALID_PASSWORDLESS_SIGNUP_FIELDS = new Set().add('USERNAME_AND_EMAIL').add('EMAIL_ONLY');\nfunction isValidPasswordlessSignupField(field) {\n  return VALID_PASSWORDLESS_SIGNUP_FIELDS.has(field);\n}\n\n/**\n * @summary Configure the behavior of [`{{> loginButtons}}`](#accountsui).\n * @locus Client\n * @param {Object} options\n * @param {Object} options.requestPermissions Which [permissions](#requestpermissions) to request from the user for each external service.\n * @param {Object} options.requestOfflineToken To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details.\n * @param {Object} options.forceApprovalPrompt If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google.\n * @param {String} options.passwordSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', or '`EMAIL_ONLY`' (default).\n * @param {String} options.passwordlessSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`EMAIL_ONLY`' (default).\n * @importFromPackage accounts-base\n */\nAccounts.ui.config = options => {\n  Object.keys(options).forEach(key => {\n    if (!VALID_OPTIONS.has(key)) {\n      throw new Error(\"Accounts.ui.config: Invalid option: \".concat(key));\n    }\n  });\n  handlePasswordSignupFields(options);\n  handlePasswordlessSignupFields(options);\n  handleRequestPermissions(options);\n  handleRequestOfflineToken(options);\n  handleForceApprovalPrompt(options);\n};\nMeteor.startup(function () {\n  var _Meteor$settings$publ, _Meteor$settings$publ2;\n  const settings = (_Meteor$settings$publ = Meteor.settings.public) === null || _Meteor$settings$publ === void 0 ? void 0 : (_Meteor$settings$publ2 = _Meteor$settings$publ.packages) === null || _Meteor$settings$publ2 === void 0 ? void 0 : _Meteor$settings$publ2['accounts-ui-unstyled'];\n  if (settings) {\n    Accounts.ui.config(settings);\n  }\n});\nfunction handlePasswordlessSignupFields(options) {\n  let {\n    passwordlessSignupFields\n  } = options;\n  if (passwordlessSignupFields) {\n    const reportInvalid = () => {\n      throw new Error(\"Accounts.ui.config: Invalid option for `passwordlessSignupFields`: \".concat(passwordlessSignupFields));\n    };\n    if (typeof passwordlessSignupFields === 'string') {\n      passwordlessSignupFields = [passwordlessSignupFields];\n    } else if (!Array.isArray(passwordlessSignupFields)) {\n      reportInvalid();\n    }\n    if (passwordlessSignupFields.every(isValidPasswordlessSignupField)) {\n      if (Accounts.ui._options.passwordlessSignupFields) {\n        throw new Error(\"Accounts.ui.config: Can't set `passwordlessSignupFields` more than once\");\n      }\n      Object.assign(Accounts.ui._options, {\n        passwordlessSignupFields\n      });\n      return;\n    }\n    reportInvalid();\n  }\n}\nfunction handlePasswordSignupFields(options) {\n  let {\n    passwordSignupFields\n  } = options;\n  if (passwordSignupFields) {\n    const reportInvalid = () => {\n      throw new Error(\"Accounts.ui.config: Invalid option for `passwordSignupFields`: \".concat(passwordSignupFields));\n    };\n    if (typeof passwordSignupFields === 'string') {\n      passwordSignupFields = [passwordSignupFields];\n    } else if (!Array.isArray(passwordSignupFields)) {\n      reportInvalid();\n    }\n    if (passwordSignupFields.every(isValidPasswordSignupField)) {\n      if (Accounts.ui._options.passwordSignupFields) {\n        throw new Error(\"Accounts.ui.config: Can't set `passwordSignupFields` more than once\");\n      }\n      Object.assign(Accounts.ui._options, {\n        passwordSignupFields\n      });\n      return;\n    }\n    reportInvalid();\n  }\n}\nfunction passwordSignupFields() {\n  const {\n    passwordSignupFields\n  } = Accounts.ui._options;\n  if (Array.isArray(passwordSignupFields)) {\n    return passwordSignupFields;\n  }\n  if (typeof passwordSignupFields === 'string') {\n    return [passwordSignupFields];\n  }\n  return ['EMAIL_ONLY'];\n}\nfunction passwordlessSignupFields() {\n  const {\n    passwordlessSignupFields\n  } = Accounts.ui._options;\n  if (Array.isArray(passwordlessSignupFields)) {\n    return passwordlessSignupFields;\n  }\n  if (typeof passwordlessSignupFields === 'string') {\n    return [passwordlessSignupFields];\n  }\n  return ['EMAIL_ONLY'];\n}\nfunction handleRequestPermissions(_ref) {\n  let {\n    requestPermissions\n  } = _ref;\n  if (requestPermissions) {\n    Object.keys(requestPermissions).forEach(service => {\n      if (Accounts.ui._options.requestPermissions[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestPermissions` more than once for \".concat(service));\n      }\n      const scope = requestPermissions[service];\n      if (!Array.isArray(scope)) {\n        throw new Error('Accounts.ui.config: Value for `requestPermissions` must be an array');\n      }\n      Accounts.ui._options.requestPermissions[service] = scope;\n    });\n  }\n}\nfunction handleRequestOfflineToken(_ref2) {\n  let {\n    requestOfflineToken\n  } = _ref2;\n  if (requestOfflineToken) {\n    Object.keys(requestOfflineToken).forEach(service => {\n      if (service !== 'google') {\n        throw new Error('Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.');\n      }\n      if (Accounts.ui._options.requestOfflineToken[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `requestOfflineToken` more than once for \".concat(service));\n      }\n      Accounts.ui._options.requestOfflineToken[service] = requestOfflineToken[service];\n    });\n  }\n}\nfunction handleForceApprovalPrompt(_ref3) {\n  let {\n    forceApprovalPrompt\n  } = _ref3;\n  if (forceApprovalPrompt) {\n    Object.keys(forceApprovalPrompt).forEach(service => {\n      if (service !== 'google') {\n        throw new Error('Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.');\n      }\n      if (Accounts.ui._options.forceApprovalPrompt[service]) {\n        throw new Error(\"Accounts.ui.config: Can't set `forceApprovalPrompt` more than once for \".concat(service));\n      }\n      Accounts.ui._options.forceApprovalPrompt[service] = forceApprovalPrompt[service];\n    });\n  }\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.login_buttons.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/template.login_buttons.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"loginButtons\");\nTemplate[\"loginButtons\"] = new Template(\"Template.loginButtons\", (function() {\n  var view = this;\n  return HTML.DIV({\n    id: \"login-buttons\",\n    class: function() {\n      return [ \"login-buttons-dropdown-align-\", Spacebars.mustache(view.lookup(\"align\")) ];\n    }\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"loggingInOrOut\"));\n    }, function() {\n      return [ \"\\n        \\n        \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"dropdown\"));\n      }, function() {\n        return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n        \" ];\n      }, function() {\n        return [ \"\\n          \", HTML.DIV({\n          class: \"login-buttons-with-only-one-button\"\n        }, \"\\n            \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingInSingleLoginButton\")), \"\\n          \"), \"\\n        \" ];\n      }), \"\\n      \" ];\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedIn\")), \"\\n      \" ];\n    }), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOut\")), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedIn\");\nTemplate[\"_loginButtonsLoggedIn\"] = new Template(\"Template._loginButtonsLoggedIn\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"dropdown\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedInDropdown\")), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"login-buttons-with-only-one-button\"\n    }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedInSingleLogoutButton\")), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOut\");\nTemplate[\"_loginButtonsLoggedOut\"] = new Template(\"Template._loginButtonsLoggedOut\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"services\"));\n  }, function() {\n    return [ \" \\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"configurationLoaded\"));\n    }, function() {\n      return [ \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"dropdown\"));\n      }, function() {\n        return [ \" \\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutDropdown\")), \"\\n      \" ];\n      }, function() {\n        return [ \"\\n        \", Spacebars.With(function() {\n          return Spacebars.call(view.lookup(\"singleService\"));\n        }, function() {\n          return [ \" \\n          \", HTML.DIV({\n            class: \"login-buttons-with-only-one-button\"\n          }, \"\\n            \", Blaze.If(function() {\n            return Spacebars.call(view.lookup(\"loggingIn\"));\n          }, function() {\n            return [ \"\\n              \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingInSingleLoginButton\")), \"\\n            \" ];\n          }, function() {\n            return [ \"\\n              \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n            \" ];\n          }), \"\\n          \"), \"\\n        \" ];\n        }), \"\\n      \" ];\n      }), \"\\n    \" ];\n    }), \"\\n  \" ];\n  }, function() {\n    return HTML.Raw('\\n    <div class=\"no-services\">No login services configured</div>\\n  ');\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsMessages\");\nTemplate[\"_loginButtonsMessages\"] = new Template(\"Template._loginButtonsMessages\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"errorMessage\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"message error-message\"\n    }, Blaze.View(\"lookup:errorMessage\", function() {\n      return Spacebars.mustache(view.lookup(\"errorMessage\"));\n    })), \"\\n  \" ];\n  }), \"\\n  \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"infoMessage\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"message info-message\"\n    }, Blaze.View(\"lookup:infoMessage\", function() {\n      return Spacebars.mustache(view.lookup(\"infoMessage\"));\n    })), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggingIn\");\nTemplate[\"_loginButtonsLoggingIn\"] = new Template(\"Template._loginButtonsLoggingIn\", (function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingInPadding\")), HTML.Raw('\\n  <div class=\"loading\">&nbsp;</div>\\n  '), Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingInPadding\")) ];\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggingInPadding\");\nTemplate[\"_loginButtonsLoggingInPadding\"] = new Template(\"Template._loginButtonsLoggingInPadding\", (function() {\n  var view = this;\n  return Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"dropdown\"));\n  }, function() {\n    return HTML.Raw('\\n    \\n    <div class=\"login-buttons-padding\">\\n      <div class=\"login-button single-login-button\" style=\"visibility: hidden;\" id=\"login-buttons-logout\">&nbsp;</div>\\n    </div>\\n  ');\n  }, function() {\n    return HTML.Raw('\\n    \\n    <div class=\"login-buttons-padding\"></div>\\n  ');\n  });\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.login_buttons_single.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/template.login_buttons_single.js                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"_loginButtonsLoggedOutSingleLoginButton\");\nTemplate[\"_loginButtonsLoggedOutSingleLoginButton\"] = new Template(\"Template._loginButtonsLoggedOutSingleLoginButton\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"login-text-and-button\"\n  }, \"\\n    \", HTML.DIV({\n    class: function() {\n      return [ \"login-button single-login-button \", Blaze.Unless(function() {\n        return Spacebars.call(view.lookup(\"configured\"));\n      }, function() {\n        return \"configure-button\";\n      }) ];\n    },\n    id: function() {\n      return [ \"login-buttons-\", Spacebars.mustache(view.lookup(\"name\")) ];\n    }\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"cannotConfigure\"));\n  }, function() {\n    return [ \"\\n        \", HTML.SPAN({\n      class: \"\"\n    }, Blaze.View(\"lookup:capitalizedName\", function() {\n      return Spacebars.mustache(view.lookup(\"capitalizedName\"));\n    }), \" not configured\"), \"\\n      \" ];\n  }, function() {\n    return [ \"\\n        \", HTML.DIV({\n      class: \"login-image\",\n      id: function() {\n        return [ \"login-buttons-image-\", Spacebars.mustache(view.lookup(\"name\")) ];\n      }\n    }), \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"configured\"));\n    }, function() {\n      return [ \"\\n          \", HTML.SPAN({\n        class: function() {\n          return [ \"text-besides-image sign-in-text-\", Spacebars.mustache(view.lookup(\"name\")) ];\n        }\n      }, \"Sign in with \", Blaze.View(\"lookup:capitalizedName\", function() {\n        return Spacebars.mustache(view.lookup(\"capitalizedName\"));\n      })), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n            \", HTML.SPAN({\n        class: function() {\n          return [ \"text-besides-image configure-text-\", Spacebars.mustache(view.lookup(\"name\")) ];\n        }\n      }, \"Configure \", Blaze.View(\"lookup:capitalizedName\", function() {\n        return Spacebars.mustache(view.lookup(\"capitalizedName\"));\n      }), \" Login\"), \"\\n        \" ];\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggingInSingleLoginButton\");\nTemplate[\"_loginButtonsLoggingInSingleLoginButton\"] = new Template(\"Template._loginButtonsLoggingInSingleLoginButton\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"login-text-and-button\"\n  }, \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedInSingleLogoutButton\");\nTemplate[\"_loginButtonsLoggedInSingleLogoutButton\"] = new Template(\"Template._loginButtonsLoggedInSingleLogoutButton\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"login-text-and-button\"\n  }, \"\\n    \", HTML.DIV({\n    class: \"login-display-name\"\n  }, \"\\n      \", Blaze.View(\"lookup:displayName\", function() {\n    return Spacebars.mustache(view.lookup(\"displayName\"));\n  }), \"\\n    \"), HTML.Raw('\\n    <div class=\"login-button single-login-button\" id=\"login-buttons-logout\">Sign Out</div>\\n  '));\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.login_buttons_dropdown.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/template.login_buttons_dropdown.js                                                    //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.__checkName(\"_loginButtonsLoggedInDropdown\");\nTemplate[\"_loginButtonsLoggedInDropdown\"] = new Template(\"Template._loginButtonsLoggedInDropdown\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: \"login-link-and-dropdown-list\"\n  }, \"\\n    \", HTML.A({\n    class: \"login-link-text\",\n    id: \"login-name-link\"\n  }, \"\\n      \", Blaze.View(\"lookup:displayName\", function() {\n    return Spacebars.mustache(view.lookup(\"displayName\"));\n  }), \" ▾\\n    \"), \"\\n\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"dropdownVisible\"));\n  }, function() {\n    return [ \"\\n      \", HTML.DIV({\n      id: \"login-dropdown-list\",\n      class: \"accounts-dialog\"\n    }, HTML.Raw('\\n        <a class=\"login-close-text\">Close</a>\\n        <div class=\"login-close-text-clear\"></div>\\n\\n        '), Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inMessageOnlyFlow\"));\n    }, function() {\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n        \" ];\n    }, function() {\n      return [ \"\\n          \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"inChangePasswordFlow\"));\n      }, function() {\n        return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"_loginButtonsChangePassword\")), \"\\n          \" ];\n      }, function() {\n        return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedInDropdownActions\")), \"\\n          \" ];\n      }), \"\\n        \" ];\n    }), \"\\n      \"), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedInDropdownActions\");\nTemplate[\"_loginButtonsLoggedInDropdownActions\"] = new Template(\"Template._loginButtonsLoggedInDropdownActions\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"allowChangingPassword\"));\n  }, function() {\n    return HTML.Raw('\\n    <div class=\"login-button\" id=\"login-buttons-open-change-password\">\\n      Change password\\n    </div>\\n  ');\n  }), HTML.Raw('\\n\\n  <div class=\"login-button\" id=\"login-buttons-logout\">\\n    Sign out\\n  </div>\\n\\n  '), Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")) ];\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutDropdown\");\nTemplate[\"_loginButtonsLoggedOutDropdown\"] = new Template(\"Template._loginButtonsLoggedOutDropdown\", (function() {\n  var view = this;\n  return HTML.DIV({\n    class: function() {\n      return [ \"login-link-and-dropdown-list \", Spacebars.mustache(view.lookup(\"additionalClasses\")) ];\n    }\n  }, \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"dropdownVisible\"));\n  }, function() {\n    return [ HTML.Raw('\\n      \\n      <a class=\"login-link-text\" id=\"login-sign-in-link\">Sign in ▾</a>\\n      '), HTML.DIV({\n      id: \"login-dropdown-list\",\n      class: \"accounts-dialog\"\n    }, HTML.Raw('\\n        <a class=\"login-close-text\">Close</a>\\n        '), Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"loggingIn\"));\n    }, function() {\n      return [ \"\\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n        \" ];\n    }), HTML.Raw('\\n        <div class=\"login-close-text-clear\"></div>\\n        '), Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutAllServices\")), \"\\n      \"), \"\\n    \" ];\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"loggingIn\"));\n    }, function() {\n      return [ \"\\n        \\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n      \" ];\n    }, function() {\n      return HTML.Raw('\\n        <a class=\"login-link-text\" id=\"login-sign-in-link\">Sign in ▾</a>\\n      ');\n    }), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutAllServices\");\nTemplate[\"_loginButtonsLoggedOutAllServices\"] = new Template(\"Template._loginButtonsLoggedOutAllServices\", (function() {\n  var view = this;\n  return [ Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"services\"));\n  }, function() {\n    return [ \"\\n    \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"isInternalService\"));\n    }, function() {\n      return [ \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"isPasswordService\"));\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"hasOtherServices\"));\n        }, function() {\n          return [ \" \\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordServiceSeparator\")), \"\\n        \" ];\n        }), \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordService\")), \"\\n      \" ];\n      }), \"\\n      \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"isPasswordlessService\"));\n      }, function() {\n        return [ \"\\n        \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"hasPasswordService\"));\n        }, function() {\n          return HTML.Raw(\"\\n          <br>\\n        \");\n        }), \"\\n        \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"displaySeparatorForPasswordless\"));\n        }, function() {\n          return [ \" \\n          \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordServiceSeparator\")), \"\\n        \" ];\n        }), \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutPasswordlessService\")), \"\\n      \" ];\n      }), \"\\n    \" ];\n    }, function() {\n      return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n    \" ];\n    }), \"\\n  \" ];\n  }), \"\\n  \", Blaze.Unless(function() {\n    return Spacebars.call(view.lookup(\"hasInternalService\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n  \" ];\n  }) ];\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordlessService\");\nTemplate[\"_loginButtonsLoggedOutPasswordlessService\"] = new Template(\"Template._loginButtonsLoggedOutPasswordlessService\", (function() {\n  var view = this;\n  return HTML.FORM({\n    class: \"login-form login-passwordless-form\"\n  }, \"\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"fields\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n    \" ];\n  }), \"\\n\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\\n    \", HTML.BUTTON({\n    class: \"login-button login-button-form-submit\",\n    id: \"login-buttons-passwordless\"\n  }, \"\\n      \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inPasswordlessConfirmation\"));\n  }, function() {\n    return \"\\n        Submit\\n      \";\n  }, function() {\n    return [ \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));\n    }, function() {\n      return \"\\n          Create account\\n        \";\n    }, function() {\n      return \"\\n          Get login code\\n        \";\n    }), \"\\n      \" ];\n  }), \"\\n    \"), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inLoginFlow\"));\n  }, function() {\n    return [ \"\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"showCreateAccountLink\"));\n    }, function() {\n      return HTML.Raw('\\n        <div class=\"additional-link-container\">\\n          <a id=\"signup-link\" class=\"additional-link\">Create account</a>\\n        </div>\\n      ');\n    }), \"\\n\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inPasswordlessConfirmation\"));\n    }, function() {\n      return HTML.Raw('\\n        <div class=\"additional-link-container\">\\n          <a id=\"resend-passwordless-code\" class=\"additional-link\">Re-send code</a>\\n        </div>\\n      ');\n    }), \"\\n    \" ];\n  }), \"\\n    \", Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inSignupFlow\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n    \" ];\n  }), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordServiceSeparator\");\nTemplate[\"_loginButtonsLoggedOutPasswordServiceSeparator\"] = new Template(\"Template._loginButtonsLoggedOutPasswordServiceSeparator\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"or\">\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n    <span class=\"or-text\">or</span>\\n    <span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n  </div>');\n}));\n\nTemplate.__checkName(\"_loginButtonsLoggedOutPasswordService\");\nTemplate[\"_loginButtonsLoggedOutPasswordService\"] = new Template(\"Template._loginButtonsLoggedOutPasswordService\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inForgotPasswordFlow\"));\n  }, function() {\n    return [ \"\\n    \", Spacebars.include(view.lookupTemplate(\"_forgotPasswordForm\")), \"\\n  \" ];\n  }, function() {\n    return [ \"\\n    \", HTML.FORM({\n      class: \"login-form login-password-form\"\n    }, \"\\n      \", Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"fields\"));\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n      \" ];\n    }), \"\\n\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\\n      \", HTML.BUTTON({\n      class: \"login-button login-button-form-submit\",\n      id: \"login-buttons-password\"\n    }, \"\\n        \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));\n    }, function() {\n      return \"\\n          Create account\\n        \";\n    }, function() {\n      return \"\\n          Sign in\\n        \";\n    }), \"\\n      \"), \"\\n\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inLoginFlow\"));\n    }, function() {\n      return [ \"\\n        \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"showCreateAccountLink\"));\n      }, function() {\n        return HTML.Raw('\\n          <div class=\"additional-link-container\">\\n            <a id=\"signup-link\" class=\"additional-link\">Create account</a>\\n          </div>\\n        ');\n      }), \"\\n\\n        \", Blaze.If(function() {\n        return Spacebars.call(view.lookup(\"showForgotPasswordLink\"));\n      }, function() {\n        return HTML.Raw('\\n          <div class=\"additional-link-container\">\\n            <a id=\"forgot-password-link\" class=\"additional-link\">Forgot password</a>\\n          </div>\\n        ');\n      }), \"\\n      \" ];\n    }), \"\\n\\n      \", Blaze.If(function() {\n      return Spacebars.call(view.lookup(\"inSignupFlow\"));\n    }, function() {\n      return [ \"\\n        \", Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n      \" ];\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_forgotPasswordForm\");\nTemplate[\"_forgotPasswordForm\"] = new Template(\"Template._forgotPasswordForm\", (function() {\n  var view = this;\n  return HTML.FORM({\n    class: \"login-form\"\n  }, HTML.Raw('\\n    <div id=\"forgot-password-email-label-and-input\"> \\n      <label id=\"forgot-password-email-label\" for=\"forgot-password-email\">Email</label>\\n      <input id=\"forgot-password-email\" type=\"email\" autocomplete=\"email\">\\n    </div>\\n\\n    '), Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n\\n    <div class=\"login-button login-button-form-submit\" id=\"login-buttons-forgot-password\">\\n      Reset password\\n    </div>\\n\\n    '), Spacebars.include(view.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n  \");\n}));\n\nTemplate.__checkName(\"_loginButtonsBackToLoginLink\");\nTemplate[\"_loginButtonsBackToLoginLink\"] = new Template(\"Template._loginButtonsBackToLoginLink\", (function() {\n  var view = this;\n  return HTML.Raw('<div class=\"additional-link-container\">\\n    <a id=\"back-to-login-link\" class=\"additional-link\">Sign in</a>\\n  </div>');\n}));\n\nTemplate.__checkName(\"_loginButtonsFormField\");\nTemplate[\"_loginButtonsFormField\"] = new Template(\"Template._loginButtonsFormField\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      id: function() {\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")), \"-label-and-input\" ];\n      },\n      style: function() {\n        return Spacebars.mustache(view.lookup(\"fieldStyle\"));\n      }\n    }, \"\\n      \", HTML.LABEL({\n      id: function() {\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")), \"-label\" ];\n      },\n      for: function() {\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")) ];\n      }\n    }, \"\\n        \", Blaze.View(\"lookup:fieldLabel\", function() {\n      return Spacebars.mustache(view.lookup(\"fieldLabel\"));\n    }), \"\\n      \"), \"\\n      \", HTML.INPUT({\n      id: function() {\n        return [ \"login-\", Spacebars.mustache(view.lookup(\"fieldName\")) ];\n      },\n      type: function() {\n        return Spacebars.mustache(view.lookup(\"inputType\"));\n      },\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"fieldValue\"));\n      },\n      autocomplete: function() {\n        return Spacebars.mustache(view.lookup(\"autocomplete\"));\n      }\n    }), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsChangePassword\");\nTemplate[\"_loginButtonsChangePassword\"] = new Template(\"Template._loginButtonsChangePassword\", (function() {\n  var view = this;\n  return HTML.FORM({\n    class: \"login-form\"\n  }, \"\\n\\n    \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"fields\"));\n  }, function() {\n    return [ \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsFormField\")), \"\\n    \" ];\n  }), \"\\n\\n    \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n\\n    <div class=\"login-button login-button-form-submit\" id=\"login-buttons-do-change-password\">\\n      Change password\\n    </div>\\n  '));\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.login_buttons_dialogs.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/template.login_buttons_dialogs.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n\nTemplate.body.addContent((function() {\n  var view = this;\n  return [ Spacebars.include(view.lookupTemplate(\"_resetPasswordDialog\")), \"\\n  \", Spacebars.include(view.lookupTemplate(\"_justResetPasswordDialog\")), \"\\n  \", Spacebars.include(view.lookupTemplate(\"_enrollAccountDialog\")), \"\\n  \", Spacebars.include(view.lookupTemplate(\"_justVerifiedEmailDialog\")), \"\\n  \", Spacebars.include(view.lookupTemplate(\"_configureLoginServiceDialog\")), \"\\n  \", Spacebars.include(view.lookupTemplate(\"_configureLoginOnDesktopDialog\")), \"\\n\\n  \\n  \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessagesDialog\")) ];\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"_resetPasswordDialog\");\nTemplate[\"_resetPasswordDialog\"] = new Template(\"Template._resetPasswordDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inResetPasswordFlow\"));\n  }, function() {\n    return [ HTML.Raw('\\n    <div class=\"hide-background\"></div>\\n\\n    '), HTML.FORM({\n      class: \"accounts-dialog accounts-centered-dialog\"\n    }, HTML.Raw('\\n      <label id=\"reset-password-username-email-label\" for=\"reset-password-username-email\" style=\"display: none;\">\\n        Username or email\\n      </label> \\n\\n      '), HTML.DIV({\n      class: \"reset-password-username-email-wrapper\",\n      style: \"display: none;\"\n    }, \"\\n        \", HTML.INPUT({\n      id: \"reset-password-username-email\",\n      type: \"text\",\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"displayName\"));\n      },\n      autocomplete: \"username email\",\n      disabled: \"\"\n    }), \"\\n      \"), HTML.Raw('\\n\\n      <label id=\"reset-password-new-password-label\" for=\"reset-password-new-password\">\\n        New password\\n      </label>      \\n\\n      <div class=\"reset-password-new-password-wrapper\">\\n        <input id=\"reset-password-new-password\" type=\"password\" autocomplete=\"new-password\">\\n      </div>\\n\\n      '), Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n\\n      <div class=\"login-button login-button-form-submit\" id=\"login-buttons-reset-password-button\">\\n        Set password\\n      </div>\\n\\n      <a class=\"accounts-close\" id=\"login-buttons-cancel-reset-password\">&times;</a>\\n    ')), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_justResetPasswordDialog\");\nTemplate[\"_justResetPasswordDialog\"] = new Template(\"Template._justResetPasswordDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"accounts-dialog accounts-centered-dialog\"\n    }, \"\\n      Password reset.\\n      You are now logged in as \", Blaze.View(\"lookup:displayName\", function() {\n      return Spacebars.mustache(view.lookup(\"displayName\"));\n    }), HTML.Raw('.\\n      <div class=\"login-button\" id=\"just-verified-dismiss-button\">Dismiss</div>\\n    ')), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_enrollAccountDialog\");\nTemplate[\"_enrollAccountDialog\"] = new Template(\"Template._enrollAccountDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"inEnrollAccountFlow\"));\n  }, function() {\n    return [ HTML.Raw('\\n    <div class=\"hide-background\"></div>\\n\\n    '), HTML.FORM({\n      class: \"accounts-dialog accounts-centered-dialog\"\n    }, HTML.Raw('\\n      <label id=\"enroll-account-username-email-label\" for=\"enroll-account-username-email\" style=\"display: none;\">\\n        Username or email\\n      </label> \\n\\n      '), HTML.DIV({\n      class: \"enroll-account-username-email-wrapper\",\n      style: \"display: none;\"\n    }, \"\\n        \", HTML.INPUT({\n      id: \"enroll-account-username-email\",\n      type: \"text\",\n      value: function() {\n        return Spacebars.mustache(view.lookup(\"displayName\"));\n      },\n      autocomplete: \"username email\",\n      disabled: \"\"\n    }), \"\\n      \"), HTML.Raw('\\n\\n      <label id=\"enroll-account-password-label\" for=\"enroll-account-password\">\\n        Choose a password\\n      </label>\\n\\n      <div class=\"enroll-account-password-wrapper\">\\n        <input id=\"enroll-account-password\" type=\"password\" autocomplete=\"new-password\">\\n      </div>\\n\\n      '), Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n\\n      <div class=\"login-button login-button-form-submit\" id=\"login-buttons-enroll-account-button\">\\n        Create account\\n      </div>\\n\\n      <a class=\"accounts-close\" id=\"login-buttons-cancel-enroll-account\">&times;</a>\\n    ')), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_justVerifiedEmailDialog\");\nTemplate[\"_justVerifiedEmailDialog\"] = new Template(\"Template._justVerifiedEmailDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"accounts-dialog accounts-centered-dialog\"\n    }, \"\\n      Email verified.\\n      You are now logged in as \", Blaze.View(\"lookup:displayName\", function() {\n      return Spacebars.mustache(view.lookup(\"displayName\"));\n    }), HTML.Raw('.\\n      <div class=\"login-button\" id=\"just-verified-dismiss-button\">Dismiss</div>\\n    ')), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_configureLoginServiceDialog\");\nTemplate[\"_configureLoginServiceDialog\"] = new Template(\"Template._configureLoginServiceDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      id: \"configure-login-service-dialog\",\n      class: \"accounts-dialog accounts-centered-dialog\"\n    }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"configurationSteps\")), HTML.Raw(\"\\n\\n      <p>\\n        Now, copy over some details.\\n      </p>\\n      \"), HTML.P(\"\\n        \", HTML.TABLE(HTML.Raw('\\n          <colgroup>\\n            <col span=\"1\" class=\"configuration_labels\">\\n            <col span=\"1\" class=\"configuration_inputs\">\\n          </colgroup>\\n          '), Blaze.Each(function() {\n      return Spacebars.call(view.lookup(\"configurationFields\"));\n    }, function() {\n      return [ \"\\n            \", HTML.TR(\"\\n              \", HTML.TD(\"\\n                \", HTML.LABEL({\n        for: function() {\n          return [ \"configure-login-service-dialog-\", Spacebars.mustache(view.lookup(\"property\")) ];\n        }\n      }, Blaze.View(\"lookup:label\", function() {\n        return Spacebars.mustache(view.lookup(\"label\"));\n      })), \"\\n              \"), \"\\n              \", HTML.TD(\"\\n                \", HTML.INPUT({\n        id: function() {\n          return [ \"configure-login-service-dialog-\", Spacebars.mustache(view.lookup(\"property\")) ];\n        },\n        type: \"text\"\n      }), \"\\n              \"), \"\\n            \"), \"\\n          \" ];\n    }), \"\\n        \"), \"\\n      \"), HTML.Raw('\\n      <p class=\"new-section\">\\n        Choose the login style:\\n      </p>\\n      <p>\\n        &emsp;<input id=\"configure-login-service-dialog-popupBasedLogin\" type=\"radio\" checked=\"checked\" name=\"loginStyle\" value=\"popup\">\\n        <label for=\"configure-login-service-dialog-popupBasedLogin\">Popup-based login (recommended for most applications)</label>\\n\\n        <br>&emsp;<input id=\"configure-login-service-dialog-redirectBasedLogin\" type=\"radio\" name=\"loginStyle\" value=\"redirect\">\\n        <label for=\"configure-login-service-dialog-redirectBasedLogin\">\\n          Redirect-based login (special cases explained\\n          <a href=\"https://github.com/meteor/meteor/wiki/OAuth-for-mobile-Meteor-clients#popup-versus-redirect-flow\" target=\"_blank\">here</a>)\\n        </label>\\n      </p>\\n      '), HTML.DIV({\n      class: \"new-section\"\n    }, HTML.Raw('\\n        <div class=\"login-button configure-login-service-dismiss-button\">\\n          I\\'ll do this later\\n        </div>\\n        <a class=\"accounts-close configure-login-service-dismiss-button\">&times;</a>\\n\\n        '), HTML.DIV({\n      class: function() {\n        return [ \"login-button login-button-configure \", Blaze.If(function() {\n          return Spacebars.call(view.lookup(\"saveDisabled\"));\n        }, function() {\n          return \"login-button-disabled\";\n        }) ];\n      },\n      id: \"configure-login-service-dialog-save-configuration\"\n    }, \"\\n          Save Configuration\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_loginButtonsMessagesDialog\");\nTemplate[\"_loginButtonsMessagesDialog\"] = new Template(\"Template._loginButtonsMessagesDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return [ \"\\n    \", HTML.DIV({\n      class: \"accounts-dialog accounts-centered-dialog\",\n      id: \"login-buttons-message-dialog\"\n    }, \"\\n      \", Spacebars.include(view.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n      <div class=\"login-button\" id=\"messages-dialog-dismiss-button\">Dismiss</div>\\n    ')), \"\\n  \" ];\n  });\n}));\n\nTemplate.__checkName(\"_configureLoginOnDesktopDialog\");\nTemplate[\"_configureLoginOnDesktopDialog\"] = new Template(\"Template._configureLoginOnDesktopDialog\", (function() {\n  var view = this;\n  return Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"visible\"));\n  }, function() {\n    return HTML.Raw('\\n    <div class=\"accounts-dialog accounts-centered-dialog\" id=\"configure-on-desktop-dialog\">\\n      <p>\\n        Please configure login on a desktop browser.\\n      </p>\\n      <div class=\"login-button\" id=\"configure-on-desktop-dismiss-button\">Dismiss</div>\\n    </div>\\n  ');\n  });\n}));\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"login_buttons_session.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/login_buttons_session.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst VALID_KEYS = ['dropdownVisible',\n// XXX consider replacing these with one key that has an enum for values.\n'inSignupFlow', 'inForgotPasswordFlow', 'inChangePasswordFlow', 'inMessageOnlyFlow', 'inPasswordlessConfirmation', 'passwordlessCodeEmail', 'errorMessage', 'infoMessage',\n// dialogs with messages (info and error)\n'resetPasswordToken', 'enrollAccountToken', 'justVerifiedEmail', 'justResetPassword', 'configureLoginServiceDialogVisible', 'configureLoginServiceDialogServiceName', 'configureLoginServiceDialogSaveDisabled', 'configureOnDesktopVisible'];\nconst validateKey = key => {\n  if (!VALID_KEYS.includes(key)) throw new Error(\"Invalid key in loginButtonsSession: \".concat(key));\n};\nconst KEY_PREFIX = \"Meteor.loginButtons.\";\n\n// XXX This should probably be package scope rather than exported\n// (there was even a comment to that effect here from before we had\n// namespacing) but accounts-ui-viewer uses it, so leave it as is for\n// now\nconst set = (key, value) => {\n  validateKey(key);\n  if (['errorMessage', 'infoMessage'].includes(key)) throw new Error(\"Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().\");\n  _set(key, value);\n};\nconst _set = (key, value) => Session.set(KEY_PREFIX + key, value);\nconst get = key => {\n  validateKey(key);\n  return Session.get(KEY_PREFIX + key);\n};\nconst closeDropdown = () => {\n  set('inSignupFlow', false);\n  set('inForgotPasswordFlow', false);\n  set('inChangePasswordFlow', false);\n  set('inMessageOnlyFlow', false);\n  set('dropdownVisible', false);\n  resetMessages();\n};\nconst infoMessage = message => {\n  _set(\"errorMessage\", null);\n  _set(\"infoMessage\", message);\n  ensureMessageVisible();\n};\nconst errorMessage = message => {\n  _set(\"errorMessage\", message);\n  _set(\"infoMessage\", null);\n  ensureMessageVisible();\n};\n\n// is there a visible dialog that shows messages (info and error)\nconst isMessageDialogVisible = () => {\n  return get('resetPasswordToken') || get('enrollAccountToken') || get('justVerifiedEmail');\n};\n\n// ensure that somethings displaying a message (info or error) is\n// visible. If a dialog with messages is open, do nothing;\n// otherwise open the dropdown.\n//\n// Notably this doesn't matter when only displaying a single login\n// button since then we have an explicit message dialog\n// (_loginButtonsMessageDialog), and dropdownVisible is ignored in\n// this case.\nconst ensureMessageVisible = () => {\n  if (!isMessageDialogVisible()) set(\"dropdownVisible\", true);\n};\nconst resetMessages = () => {\n  _set(\"errorMessage\", null);\n  _set(\"infoMessage\", null);\n};\nconst configureService = name => {\n  if (Meteor.isCordova) {\n    set('configureOnDesktopVisible', true);\n  } else {\n    set('configureLoginServiceDialogVisible', true);\n    set('configureLoginServiceDialogServiceName', name);\n    set('configureLoginServiceDialogSaveDisabled', true);\n  }\n};\nAccounts._loginButtonsSession = {\n  set,\n  _set,\n  get,\n  closeDropdown,\n  infoMessage,\n  errorMessage,\n  isMessageDialogVisible,\n  ensureMessageVisible,\n  resetMessages,\n  configureService\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"login_buttons.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/login_buttons.js                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.export({\n  displayName: () => displayName,\n  getLoginServices: () => getLoginServices,\n  hasPasswordService: () => hasPasswordService,\n  hasPasswordlessService: () => hasPasswordlessService,\n  dropdown: () => dropdown,\n  validateUsername: () => validateUsername,\n  validateEmail: () => validateEmail,\n  validatePassword: () => validatePassword\n});\nlet passwordSignupFields;\nmodule.link(\"./accounts_ui.js\", {\n  passwordSignupFields(v) {\n    passwordSignupFields = v;\n  }\n}, 0);\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n// shared between dropdown and single mode\nTemplate.loginButtons.events({\n  'click #login-buttons-logout': () => Meteor.logout(() => loginButtonsSession.closeDropdown())\n});\nTemplate.registerHelper('loginButtons', () => {\n  throw new Error(\"Use {{> loginButtons}} instead of {{loginButtons}}\");\n});\n\n//\n// helpers\n//\n\nconst displayName = () => {\n  const user = Meteor.user();\n  if (!user) return '';\n  if (user.profile && user.profile.name) return user.profile.name;\n  if (user.username) return user.username;\n  if (user.emails && user.emails[0] && user.emails[0].address) return user.emails[0].address;\n  return '';\n};\nconst getLoginServices = () => {\n  // First look for OAuth services.\n  const services = Package['accounts-oauth'] ? Accounts.oauth.serviceNames() : [];\n\n  // Be equally kind to all login services. This also preserves\n  // backwards-compatibility. (But maybe order should be\n  // configurable?)\n  services.sort();\n\n  // Add password, if it's there; it must come last.\n  if (hasPasswordService()) services.push('password');\n  if (hasPasswordlessService()) services.push('passwordless');\n  return services.map(name => ({\n    name\n  }));\n};\nconst hasPasswordService = () => !!Package['accounts-password'];\nconst hasPasswordlessService = () => !!Package['accounts-passwordless'];\nconst dropdown = () => hasPasswordService() || hasPasswordlessService() || getLoginServices().length > 1;\nconst validateUsername = username => {\n  if (username.length >= 3) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Username must be at least 3 characters long\");\n    return false;\n  }\n};\nconst validateEmail = email => {\n  if (passwordSignupFields() === \"USERNAME_AND_OPTIONAL_EMAIL\" && email === '') return true;\n  if (email.includes('@')) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n    return false;\n  }\n};\nconst validatePassword = password => {\n  if (password.length >= 6) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Password must be at least 6 characters long\");\n    return false;\n  }\n};\n//\n// loginButtonLoggedOut template\n//\n\nTemplate._loginButtonsLoggedOut.helpers({\n  dropdown,\n  services: getLoginServices,\n  singleService: () => {\n    const services = getLoginServices();\n    if (services.length !== 1) throw new Error(\"Shouldn't be rendering this template with more than one configured service\");\n    return services[0];\n  },\n  configurationLoaded: () => Accounts.loginServicesConfigured()\n});\n\n//\n// loginButtonsLoggedIn template\n//\n\n// decide whether we should show a dropdown rather than a row of\n// buttons\nTemplate._loginButtonsLoggedIn.helpers({\n  dropdown\n});\n\n//\n// loginButtonsLoggedInSingleLogoutButton template\n//\n\nTemplate._loginButtonsLoggedInSingleLogoutButton.helpers({\n  displayName\n});\n\n//\n// loginButtonsMessage template\n//\n\nTemplate._loginButtonsMessages.helpers({\n  errorMessage: () => loginButtonsSession.get('errorMessage')\n});\nTemplate._loginButtonsMessages.helpers({\n  infoMessage: () => loginButtonsSession.get('infoMessage')\n});\n\n//\n// loginButtonsLoggingInPadding template\n//\n\nTemplate._loginButtonsLoggingInPadding.helpers({\n  dropdown\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"login_buttons_single.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/login_buttons_single.js                                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet getLoginServices;\nmodule.link(\"./login_buttons.js\", {\n  getLoginServices(v) {\n    getLoginServices = v;\n  }\n}, 0);\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\nconst loginResultCallback = (serviceName, err) => {\n  if (!err) {\n    loginButtonsSession.closeDropdown();\n  } else if (err instanceof Accounts.LoginCancelledError) {\n    // do nothing\n  } else if (err instanceof ServiceConfiguration.ConfigError) {\n    if (Template._configureLoginServiceDialog.templateForService(serviceName)) {\n      loginButtonsSession.configureService(serviceName);\n    } else {\n      loginButtonsSession.errorMessage(\"No configuration for \".concat(capitalize(serviceName), \".\\n\") + \"Use `ServiceConfiguration` to configure it or \" + \"install the `\".concat(serviceName, \"-config-ui` package.\"));\n    }\n  } else {\n    loginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n  }\n};\n\n// In the login redirect flow, we'll have the result of the login\n// attempt at page load time when we're redirected back to the\n// application.  Register a callback to update the UI (i.e. to close\n// the dialog on a successful login or display the error on a failed\n// login).\n//\nAccounts.onPageLoadLogin(attemptInfo => {\n  // Ignore if we have a left over login attempt for a service that is no longer registered.\n  if (getLoginServices().map(service => service.name).includes(attemptInfo.type)) loginResultCallback(attemptInfo.type, attemptInfo.error);\n});\nTemplate._loginButtonsLoggedOutSingleLoginButton.events({\n  'click .login-button': function () {\n    const serviceName = this.name;\n    loginButtonsSession.resetMessages();\n\n    // XXX Service providers should be able to specify their\n    // `Meteor.loginWithX` method name.\n    const loginWithService = Meteor[\"loginWith\".concat(serviceName === 'meteor-developer' ? 'MeteorDeveloperAccount' : capitalize(serviceName))];\n    const options = {}; // use default scope unless specified\n    if (Accounts.ui._options.requestPermissions[serviceName]) options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n    if (Accounts.ui._options.requestOfflineToken[serviceName]) options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n    if (Accounts.ui._options.forceApprovalPrompt[serviceName]) options.forceApprovalPrompt = Accounts.ui._options.forceApprovalPrompt[serviceName];\n    loginWithService(options, err => {\n      loginResultCallback(serviceName, err);\n    });\n  }\n});\nTemplate._loginButtonsLoggedOutSingleLoginButton.helpers({\n  // not configured and has no config UI\n  cannotConfigure: function () {\n    return !ServiceConfiguration.configurations.findOne({\n      service: this.name\n    }) && !Template._configureLoginServiceDialog.templateForService(this.name);\n  },\n  configured: function () {\n    return !!ServiceConfiguration.configurations.findOne({\n      service: this.name\n    });\n  },\n  capitalizedName: function () {\n    if (this.name === 'github')\n      // XXX we should allow service packages to set their capitalized name\n      return 'GitHub';else if (this.name === 'meteor-developer') return 'Meteor';else return capitalize(this.name);\n  }\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = input => {\n  const str = input == null ? '' : String(input);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"login_buttons_dropdown.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/login_buttons_dropdown.js                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet passwordlessSignupFields, passwordSignupFields;\nmodule.link(\"./accounts_ui.js\", {\n  passwordlessSignupFields(v) {\n    passwordlessSignupFields = v;\n  },\n  passwordSignupFields(v) {\n    passwordSignupFields = v;\n  }\n}, 0);\nlet displayName, getLoginServices, hasPasswordService, hasPasswordlessService, validateUsername, validateEmail, validatePassword;\nmodule.link(\"./login_buttons.js\", {\n  displayName(v) {\n    displayName = v;\n  },\n  getLoginServices(v) {\n    getLoginServices = v;\n  },\n  hasPasswordService(v) {\n    hasPasswordService = v;\n  },\n  hasPasswordlessService(v) {\n    hasPasswordlessService = v;\n  },\n  validateUsername(v) {\n    validateUsername = v;\n  },\n  validateEmail(v) {\n    validateEmail = v;\n  },\n  validatePassword(v) {\n    validatePassword = v;\n  }\n}, 1);\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n//\n// helpers\n//\n\nconst elementValueById = id => {\n  const element = document.getElementById(id);\n  if (!element) return null;else return element.value;\n};\nconst trimmedElementValueById = id => {\n  const element = document.getElementById(id);\n  if (!element) return null;else return element.value.replace(/^\\s*|\\s*$/g, \"\"); // trim() doesn't work on IE8;\n};\nconst loginOrSignup = () => {\n  if (loginButtonsSession.get('inSignupFlow')) signup();else login();\n};\nconst loginOrSignupPasswordless = () => {\n  loginButtonsSession.resetMessages();\n  if (loginButtonsSession.get('inPasswordlessConfirmation')) {\n    const token = trimmedElementValueById('login-code-passwordless');\n    Meteor.passwordlessLoginWithToken({\n      email: loginButtonsSession.get('passwordlessCodeEmail')\n    }, token, error => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('inPasswordlessConfirmation', false);\n        loginButtonsSession.set('passwordlessCodeEmail', null);\n      }\n    });\n    return;\n  }\n  const email = trimmedElementValueById('login-email-passwordless');\n  const username = trimmedElementValueById('login-username-passwordless');\n  if (!email.includes('@')) {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n    return;\n  }\n  if (Accounts._options.forbidClientAccountCreation) {\n    loginButtonsSession.errorMessage(\"Action not allowed\");\n    return;\n  }\n  if (username !== null && !validateUsername(username)) {\n    return;\n  }\n  Accounts.requestLoginTokenForUser({\n    selector: email,\n    userData: {\n      email,\n      username\n    }\n  }, (error, result) => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      var _result$selector;\n      loginButtonsSession.set('inPasswordlessConfirmation', true);\n      loginButtonsSession.set('inSignupFlow', false);\n      loginButtonsSession.set('passwordlessCodeEmail', result === null || result === void 0 ? void 0 : (_result$selector = result.selector) === null || _result$selector === void 0 ? void 0 : _result$selector.email);\n    }\n  });\n};\nconst login = () => {\n  loginButtonsSession.resetMessages();\n  const username = trimmedElementValueById('login-username');\n  const email = trimmedElementValueById('login-email');\n  const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n  let loginSelector;\n  if (username !== null) {\n    if (!validateUsername(username)) return;else loginSelector = {\n      username: username\n    };\n  } else if (email !== null) {\n    if (!validateEmail(email)) return;else loginSelector = {\n      email: email\n    };\n  } else if (usernameOrEmail !== null) {\n    // XXX not sure how we should validate this. but this seems good enough (for now),\n    // since an email must have at least 3 characters anyways\n    if (!validateUsername(usernameOrEmail)) return;else loginSelector = usernameOrEmail;\n  } else {\n    throw new Error(\"Unexpected -- no element to use as a login user selector\");\n  }\n  Meteor.loginWithPassword(loginSelector, password, (error, result) => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.closeDropdown();\n    }\n  });\n};\nconst signup = () => {\n  loginButtonsSession.resetMessages();\n  const options = {}; // to be passed to Accounts.createUser\n\n  const username = trimmedElementValueById('login-username');\n  if (username !== null) {\n    if (!validateUsername(username)) return;else options.username = username;\n  }\n  const email = trimmedElementValueById('login-email');\n  if (email !== null) {\n    if (!validateEmail(email)) return;else options.email = email;\n  }\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n  if (!validatePassword(password)) return;else options.password = password;\n  if (!matchPasswordAgainIfPresent()) return;\n  Accounts.createUser(options, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.closeDropdown();\n    }\n  });\n};\nconst forgotPassword = () => {\n  loginButtonsSession.resetMessages();\n  const email = trimmedElementValueById(\"forgot-password-email\");\n  if (email.includes('@')) {\n    Accounts.forgotPassword({\n      email: email\n    }, error => {\n      if (error) loginButtonsSession.errorMessage(error.reason || \"Unknown error\");else loginButtonsSession.infoMessage(\"Email sent\");\n    });\n  } else {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n  }\n};\nconst changePassword = () => {\n  loginButtonsSession.resetMessages();\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const oldPassword = elementValueById('login-old-password');\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n  if (!validatePassword(password)) return;\n  if (!matchPasswordAgainIfPresent()) return;\n  Accounts.changePassword(oldPassword, password, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('inChangePasswordFlow', false);\n      loginButtonsSession.set('inMessageOnlyFlow', true);\n      loginButtonsSession.infoMessage(\"Password changed\");\n    }\n  });\n};\nconst matchPasswordAgainIfPresent = () => {\n  // notably not trimmed. a password could (?) start or end with a space\n  const passwordAgain = elementValueById('login-password-again');\n  if (passwordAgain !== null) {\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n    if (password !== passwordAgain) {\n      loginButtonsSession.errorMessage(\"Passwords don't match\");\n      return false;\n    }\n  }\n  return true;\n};\n\n// Utility containment function that works with both arrays and single values\nconst isInPasswordSignupFields = fieldOrFields => {\n  const signupFields = passwordSignupFields();\n  if (Array.isArray(fieldOrFields)) {\n    return signupFields.reduce((prev, field) => prev && fieldOrFields.includes(field), true);\n  }\n  return signupFields.includes(fieldOrFields);\n};\nconst isInPasswordlessSignupFields = fieldOrFields => {\n  const signupFields = passwordlessSignupFields();\n  if (Array.isArray(fieldOrFields)) {\n    return signupFields.reduce((prev, field) => prev && fieldOrFields.includes(field), true);\n  }\n  return signupFields.includes(fieldOrFields);\n};\n\n// events shared between loginButtonsLoggedOutDropdown and\n// loginButtonsLoggedInDropdown\nTemplate.loginButtons.events({\n  'click #login-name-link, click #login-sign-in-link': () => loginButtonsSession.set('dropdownVisible', true),\n  'click .login-close-text': loginButtonsSession.closeDropdown\n});\n\n//\n// loginButtonsLoggedInDropdown template and related\n//\n\nTemplate._loginButtonsLoggedInDropdown.events({\n  'click #login-buttons-open-change-password': () => {\n    loginButtonsSession.resetMessages();\n    loginButtonsSession.set('inChangePasswordFlow', true);\n  }\n});\nTemplate._loginButtonsLoggedInDropdown.helpers({\n  displayName,\n  inChangePasswordFlow: () => loginButtonsSession.get('inChangePasswordFlow'),\n  inMessageOnlyFlow: () => loginButtonsSession.get('inMessageOnlyFlow'),\n  dropdownVisible: () => loginButtonsSession.get('dropdownVisible')\n});\nTemplate._loginButtonsLoggedInDropdownActions.helpers({\n  allowChangingPassword: () => {\n    // it would be more correct to check whether the user has a password set,\n    // but in order to do that we'd have to send more data down to the client,\n    // and it'd be preferable not to send down the entire service.password document.\n    //\n    // instead we use the heuristic: if the user has a username or email set.\n    if (!Package['accounts-password']) return false;\n    const user = Meteor.user();\n    return user.username || user.emails && user.emails[0] && user.emails[0].address;\n  }\n});\n\n//\n// loginButtonsLoggedOutDropdown template and related\n//\n\nTemplate._loginButtonsLoggedOutDropdown.events({\n  'click #login-buttons-password': event => {\n    event.preventDefault();\n    loginOrSignup();\n  },\n  'click #login-buttons-passwordless': event => {\n    event.preventDefault();\n    loginOrSignupPasswordless();\n  },\n  'keypress #forgot-password-email': event => {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      forgotPassword();\n    }\n  },\n  'click #login-buttons-forgot-password': forgotPassword,\n  'click #signup-link': () => {\n    loginButtonsSession.resetMessages();\n\n    // store values of fields before swtiching to the signup form\n    const username = trimmedElementValueById('login-username');\n    const email = trimmedElementValueById('login-email');\n    const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n    loginButtonsSession.set('inSignupFlow', true);\n    loginButtonsSession.set('inForgotPasswordFlow', false);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n\n    // update new fields with appropriate defaults\n    if (username !== null) document.getElementById('login-username').value = username;else if (email !== null) document.getElementById('login-email').value = email;else if (usernameOrEmail !== null) if (!usernameOrEmail.includes('@')) document.getElementById('login-username').value = usernameOrEmail;else document.getElementById('login-email').value = usernameOrEmail;\n    if (password !== null) document.getElementById('login-password').value = password;\n\n    // Force redrawing the `login-dropdown-list` element because of\n    // a bizarre Chrome bug in which part of the DIV is not redrawn\n    // in case you had tried to unsuccessfully log in before\n    // switching to the signup form.\n    //\n    // Found tip on how to force a redraw on\n    // http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes/3485654#3485654\n    const redraw = document.getElementById('login-dropdown-list');\n    redraw.style.display = 'none';\n    redraw.offsetHeight; // it seems that this line does nothing but is necessary for the redraw to work\n    redraw.style.display = 'block';\n  },\n  'click #forgot-password-link': () => {\n    loginButtonsSession.resetMessages();\n\n    // store values of fields before swtiching to the signup form\n    const email = trimmedElementValueById('login-email');\n    const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n    loginButtonsSession.set('inSignupFlow', false);\n    loginButtonsSession.set('inForgotPasswordFlow', true);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n\n    // update new fields with appropriate defaults\n    if (email !== null) document.getElementById('forgot-password-email').value = email;else if (usernameOrEmail !== null) if (usernameOrEmail.includes('@')) document.getElementById('forgot-password-email').value = usernameOrEmail;\n  },\n  'click #resend-passwordless-code': () => {\n    loginButtonsSession.set('inPasswordlessConfirmation', false);\n    loginButtonsSession.set('passwordlessCodeEmail', null);\n  },\n  'click #back-to-login-link': () => {\n    loginButtonsSession.resetMessages();\n    const username = trimmedElementValueById('login-username');\n    const email = trimmedElementValueById('login-email') || trimmedElementValueById('forgot-password-email'); // Ughh. Standardize on names?\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n    loginButtonsSession.set('inSignupFlow', false);\n    loginButtonsSession.set('inForgotPasswordFlow', false);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n    if (document.getElementById('login-username') && username !== null) document.getElementById('login-username').value = username;\n    if (document.getElementById('login-email') && email !== null) document.getElementById('login-email').value = email;\n    const usernameOrEmailInput = document.getElementById('login-username-or-email');\n    if (usernameOrEmailInput) {\n      if (email !== null) usernameOrEmailInput.value = email;\n      if (username !== null) usernameOrEmailInput.value = username;\n    }\n    if (password !== null) document.getElementById('login-password').value = password;\n  }\n});\nTemplate._loginButtonsLoggedOutDropdown.helpers({\n  // additional classes that can be helpful in styling the dropdown\n  additionalClasses: () => {\n    if (!hasPasswordService() || !hasPasswordlessService()) {\n      return false;\n    } else {\n      if (loginButtonsSession.get('inSignupFlow')) {\n        return 'login-form-create-account';\n      } else if (loginButtonsSession.get('inForgotPasswordFlow')) {\n        return 'login-form-forgot-password';\n      } else {\n        return 'login-form-sign-in';\n      }\n    }\n  },\n  dropdownVisible: () => loginButtonsSession.get('dropdownVisible'),\n  hasPasswordService,\n  hasPasswordlessService\n});\n\n// return all login services, with password last\nTemplate._loginButtonsLoggedOutAllServices.helpers({\n  services: getLoginServices,\n  isPasswordService: function () {\n    return this.name === 'password';\n  },\n  isPasswordlessService: function () {\n    return this.name === 'passwordless';\n  },\n  hasOtherServices: () => {\n    let count = 0;\n    if (hasPasswordlessService()) count++;\n    if (hasPasswordService()) count++;\n    return getLoginServices().length > count;\n  },\n  displaySeparatorForPasswordless: () => {\n    return hasPasswordService() || getLoginServices().length > 1;\n  },\n  isInternalService: function () {\n    return this.name === 'password' || this.name === 'passwordless';\n  },\n  hasInternalService: () => hasPasswordService() || hasPasswordlessService(),\n  hasPasswordService,\n  hasPasswordlessService\n});\nTemplate._loginButtonsLoggedOutPasswordlessService.helpers({\n  fields: () => [{\n    fieldName: 'email-passwordless',\n    fieldLabel: 'Email',\n    autocomplete: 'email',\n    inputType: 'email',\n    visible: () => !loginButtonsSession.get('inPasswordlessConfirmation')\n  }, {\n    fieldName: 'username-passwordless',\n    fieldLabel: 'Username',\n    autocomplete: 'username',\n    inputType: 'text',\n    visible: () => isInPasswordlessSignupFields('USERNAME_AND_EMAIL') && loginButtonsSession.get('inSignupFlow')\n  }, {\n    fieldName: 'code-passwordless',\n    fieldLabel: 'Code',\n    inputType: 'text',\n    visible: () => loginButtonsSession.get('inPasswordlessConfirmation')\n  }],\n  inForgotPasswordFlow: () => loginButtonsSession.get('inForgotPasswordFlow'),\n  inPasswordlessConfirmation: () => loginButtonsSession.get('inPasswordlessConfirmation'),\n  inLoginFlow: () => !loginButtonsSession.get('inSignupFlow') && !loginButtonsSession.get('inForgotPasswordFlow'),\n  inSignupFlow: () => loginButtonsSession.get('inSignupFlow'),\n  showCreateAccountLink: () => !Accounts._options.forbidClientAccountCreation\n});\nTemplate._loginButtonsLoggedOutPasswordService.helpers({\n  fields: () => {\n    const loginFields = [{\n      fieldName: 'username-or-email',\n      fieldLabel: 'Username or Email',\n      autocomplete: 'username email',\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\"])\n    }, {\n      fieldName: 'username',\n      fieldLabel: 'Username',\n      autocomplete: 'username',\n      visible: () => isInPasswordSignupFields(\"USERNAME_ONLY\")\n    }, {\n      fieldName: 'email',\n      fieldLabel: 'Email',\n      inputType: 'email',\n      autocomplete: 'email',\n      visible: () => isInPasswordSignupFields(\"EMAIL_ONLY\")\n    }, {\n      fieldName: 'password',\n      fieldLabel: 'Password',\n      inputType: 'password',\n      autocomplete: 'current-password',\n      visible: () => true\n    }];\n    const signupFields = [{\n      fieldName: 'username',\n      fieldLabel: 'Username',\n      autocomplete: 'username',\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"])\n    }, {\n      fieldName: 'email',\n      fieldLabel: 'Email',\n      inputType: 'email',\n      autocomplete: 'email',\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"EMAIL_ONLY\"])\n    }, {\n      fieldName: 'email',\n      fieldLabel: 'Email (optional)',\n      inputType: 'email',\n      autocomplete: 'email',\n      visible: () => isInPasswordSignupFields(\"USERNAME_AND_OPTIONAL_EMAIL\")\n    }, {\n      fieldName: 'password',\n      fieldLabel: 'Password',\n      inputType: 'password',\n      autocomplete: 'new-password',\n      visible: () => true\n    }, {\n      fieldName: 'password-again',\n      fieldLabel: 'Password (again)',\n      inputType: 'password',\n      autocomplete: 'new-password',\n      // No need to make users double-enter their password if\n      // they'll necessarily have an email set, since they can use\n      // the \"forgot password\" flow.\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"])\n    }];\n    return loginButtonsSession.get('inSignupFlow') ? signupFields : loginFields;\n  },\n  inForgotPasswordFlow: () => loginButtonsSession.get('inForgotPasswordFlow'),\n  inLoginFlow: () => !loginButtonsSession.get('inSignupFlow') && !loginButtonsSession.get('inForgotPasswordFlow'),\n  inSignupFlow: () => loginButtonsSession.get('inSignupFlow'),\n  showCreateAccountLink: () => !Accounts._options.forbidClientAccountCreation,\n  showForgotPasswordLink: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"EMAIL_ONLY\"])\n});\nTemplate._loginButtonsFormField.helpers({\n  inputType: function () {\n    return this.inputType || \"text\";\n  }\n});\n\n//\n// loginButtonsChangePassword template\n//\n\nTemplate._loginButtonsChangePassword.events({\n  'keypress #login-old-password, keypress #login-password, keypress #login-password-again': event => {\n    if (event.keyCode === 13) changePassword();\n  },\n  'click #login-buttons-do-change-password': changePassword\n});\nTemplate._loginButtonsChangePassword.helpers({\n  fields: () => {\n    const {\n      username,\n      emails\n    } = Meteor.user();\n    let email;\n    if (emails) {\n      email = emails[0].address;\n    }\n    return [\n    // The username and email fields are included here to address an\n    // accessibility warning in Chrome, but the fields don't actually display.\n    // The warning states that there should be an optionally hidden\n    // username/email field on password forms.\n    // XXX I think we should not use a CSS class here because this is the\n    // `unstyled` package. So instead we apply an inline style.\n    {\n      fieldName: 'username',\n      fieldLabel: 'Username',\n      autocomplete: 'username',\n      fieldStyle: 'display: none;',\n      fieldValue: username,\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"])\n    }, {\n      fieldName: 'email',\n      fieldLabel: 'Email',\n      inputType: 'email',\n      autocomplete: 'email',\n      fieldStyle: 'display: none;',\n      fieldValue: email,\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_EMAIL\", \"EMAIL_ONLY\"])\n    }, {\n      fieldName: 'old-password',\n      fieldLabel: 'Current Password',\n      inputType: 'password',\n      autocomplete: 'current-password',\n      visible: () => true\n    }, {\n      fieldName: 'password',\n      fieldLabel: 'New Password',\n      inputType: 'password',\n      autocomplete: 'new-password',\n      visible: () => true\n    }, {\n      fieldName: 'password-again',\n      fieldLabel: 'New Password (again)',\n      inputType: 'password',\n      autocomplete: 'new-password',\n      // No need to make users double-enter their password if\n      // they'll necessarily have an email set, since they can use\n      // the \"forgot password\" flow.\n      visible: () => isInPasswordSignupFields([\"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"])\n    }];\n  }\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"login_buttons_dialogs.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/accounts-ui-unstyled/login_buttons_dialogs.js                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet displayName, dropdown, validatePassword;\nmodule.link(\"./login_buttons.js\", {\n  displayName(v) {\n    displayName = v;\n  },\n  dropdown(v) {\n    dropdown = v;\n  },\n  validatePassword(v) {\n    validatePassword = v;\n  }\n}, 0);\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n// since we don't want to pass around the callback that we get from our event\n// handlers, we just make it a variable for the whole file\nlet doneCallback;\nAccounts.onResetPasswordLink((token, done) => {\n  loginButtonsSession.set(\"resetPasswordToken\", token);\n  doneCallback = done;\n});\nAccounts.onEnrollmentLink((token, done) => {\n  loginButtonsSession.set(\"enrollAccountToken\", token);\n  doneCallback = done;\n});\nAccounts.onEmailVerificationLink((token, done) => {\n  Accounts.verifyEmail(token, error => {\n    if (!error) {\n      loginButtonsSession.set('justVerifiedEmail', true);\n    }\n    done();\n    // XXX show something if there was an error.\n  });\n});\n\n//\n// resetPasswordDialog template\n//\n\nTemplate._resetPasswordDialog.events({\n  'click #login-buttons-reset-password-button': () => resetPassword(),\n  'keypress #reset-password-new-password': event => {\n    if (event.keyCode === 13) resetPassword();\n  },\n  'click #login-buttons-cancel-reset-password': () => {\n    loginButtonsSession.set('resetPasswordToken', null);\n    if (doneCallback) doneCallback();\n  }\n});\nconst resetPassword = () => {\n  loginButtonsSession.resetMessages();\n  const newPassword = document.getElementById('reset-password-new-password').value;\n  if (!validatePassword(newPassword)) return;\n  Accounts.resetPassword(loginButtonsSession.get('resetPasswordToken'), newPassword, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('resetPasswordToken', null);\n      loginButtonsSession.set('justResetPassword', true);\n      if (doneCallback) doneCallback();\n    }\n  });\n};\nTemplate._resetPasswordDialog.helpers({\n  displayName,\n  inResetPasswordFlow: () => loginButtonsSession.get('resetPasswordToken')\n});\n\n//\n// justResetPasswordDialog template\n//\n\nTemplate._justResetPasswordDialog.events({\n  'click #just-verified-dismiss-button': () => loginButtonsSession.set('justResetPassword', false)\n});\nTemplate._justResetPasswordDialog.helpers({\n  visible: () => loginButtonsSession.get('justResetPassword'),\n  displayName\n});\n\n//\n// enrollAccountDialog template\n//\n\nconst enrollAccount = () => {\n  loginButtonsSession.resetMessages();\n  const password = document.getElementById('enroll-account-password').value;\n  if (!validatePassword(password)) return;\n  Accounts.resetPassword(loginButtonsSession.get('enrollAccountToken'), password, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('enrollAccountToken', null);\n      if (doneCallback) doneCallback();\n    }\n  });\n};\nTemplate._enrollAccountDialog.events({\n  'click #login-buttons-enroll-account-button': enrollAccount,\n  'keypress #enroll-account-password': event => {\n    if (event.keyCode === 13) enrollAccount();\n  },\n  'click #login-buttons-cancel-enroll-account': () => {\n    loginButtonsSession.set('enrollAccountToken', null);\n    if (doneCallback) doneCallback();\n  }\n});\nTemplate._enrollAccountDialog.helpers({\n  displayName,\n  inEnrollAccountFlow: () => loginButtonsSession.get('enrollAccountToken')\n});\n\n//\n// justVerifiedEmailDialog template\n//\n\nTemplate._justVerifiedEmailDialog.events({\n  'click #just-verified-dismiss-button': () => loginButtonsSession.set('justVerifiedEmail', false)\n});\nTemplate._justVerifiedEmailDialog.helpers({\n  visible: () => loginButtonsSession.get('justVerifiedEmail'),\n  displayName\n});\n\n//\n// loginButtonsMessagesDialog template\n//\n\nTemplate._loginButtonsMessagesDialog.events({\n  'click #messages-dialog-dismiss-button': () => loginButtonsSession.resetMessages()\n});\nTemplate._loginButtonsMessagesDialog.helpers({\n  visible: () => {\n    const hasMessage = loginButtonsSession.get('infoMessage') || loginButtonsSession.get('errorMessage');\n    return !dropdown() && hasMessage;\n  }\n});\n\n//\n// configureLoginServiceDialog template\n//\n\nTemplate._configureLoginServiceDialog.events({\n  'click .configure-login-service-dismiss-button': () => loginButtonsSession.set('configureLoginServiceDialogVisible', false),\n  'click #configure-login-service-dialog-save-configuration': () => {\n    if (loginButtonsSession.get('configureLoginServiceDialogVisible') && !loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')) {\n      // Prepare the configuration document for this login service\n      const serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n      const configuration = {\n        service: serviceName\n      };\n\n      // Fetch the value of each input field\n      configurationFields().forEach(field => {\n        configuration[field.property] = document.getElementById(\"configure-login-service-dialog-\".concat(field.property)).value.replace(/^\\s*|\\s*$/g, \"\"); // trim() doesnt work on IE8;\n      });\n\n      // Replacement of single use of jQuery in this package so we can remove\n      // the dependency\n      const inputs = [].slice.call(\n      // Because HTMLCollections aren't arrays\n      document.getElementById('configure-login-service-dialog').getElementsByTagName('input'));\n      configuration.loginStyle = document.querySelector('#configure-login-service-dialog input[name=\"loginStyle\"]:checked').value;\n\n      // Configure this login service\n      Accounts.connection.call(\"configureLoginService\", configuration, (error, result) => {\n        if (error) Meteor._debug(\"Error configuring login service \".concat(serviceName), error);else loginButtonsSession.set('configureLoginServiceDialogVisible', false);\n      });\n    }\n  },\n  // IE8 doesn't support the 'input' event, so we'll run this on the keyup as\n  // well. (Keeping the 'input' event means that this also fires when you use\n  // the mouse to change the contents of the field, eg 'Cut' menu item.)\n  'input, keyup input': event => {\n    // if the event fired on one of the configuration input fields,\n    // check whether we should enable the 'save configuration' button\n    if (event.target.id.indexOf('configure-login-service-dialog') === 0) updateSaveDisabled();\n  }\n});\n\n// check whether the 'save configuration' button should be enabled.\n// this is a really strange way to implement this and a Forms\n// Abstraction would make all of this reactive, and simpler.\nconst updateSaveDisabled = () => {\n  const anyFieldEmpty = configurationFields().reduce((prev, field) => prev || document.getElementById(\"configure-login-service-dialog-\".concat(field.property)).value === '', false);\n  loginButtonsSession.set('configureLoginServiceDialogSaveDisabled', anyFieldEmpty);\n};\n\n// Returns the appropriate template for this login service.  This\n// template should be defined in the service's package\nTemplate._configureLoginServiceDialog.templateForService = serviceName => {\n  serviceName = serviceName || loginButtonsSession.get('configureLoginServiceDialogServiceName');\n  // XXX Service providers should be able to specify their configuration\n  // template name.\n  return Template[\"configureLoginServiceDialogFor\".concat(serviceName === 'meteor-developer' ? 'MeteorDeveloper' : capitalize(serviceName))];\n};\nconst configurationFields = () => {\n  const template = Template._configureLoginServiceDialog.templateForService();\n  return template.fields();\n};\nTemplate._configureLoginServiceDialog.helpers({\n  configurationFields,\n  visible: () => loginButtonsSession.get('configureLoginServiceDialogVisible'),\n  // renders the appropriate template\n  configurationSteps: () => Template._configureLoginServiceDialog.templateForService(),\n  saveDisabled: () => loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = str => {\n  str = str == null ? '' : String(str);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\nTemplate._configureLoginOnDesktopDialog.helpers({\n  visible: () => loginButtonsSession.get('configureOnDesktopVisible')\n});\nTemplate._configureLoginOnDesktopDialog.events({\n  'click #configure-on-desktop-dismiss-button': () => loginButtonsSession.set('configureOnDesktopVisible', false)\n});\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".less\"\n  ]\n});\n\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/accounts_ui.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/template.login_buttons.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/template.login_buttons_single.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/template.login_buttons_dropdown.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/template.login_buttons_dialogs.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/login_buttons_session.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/login_buttons.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/login_buttons_single.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/login_buttons_dropdown.js\");\nrequire(\"/node_modules/meteor/accounts-ui-unstyled/login_buttons_dialogs.js\");\n\n/* Exports */\nPackage._define(\"accounts-ui-unstyled\");\n\n})();\n","servePath":"/packages/accounts-ui-unstyled.js","sourceMap":{"version":3,"sources":["packages/accounts-ui-unstyled/accounts_ui.js","packages/accounts-ui-unstyled/login_buttons_session.js","packages/accounts-ui-unstyled/login_buttons.js","packages/accounts-ui-unstyled/login_buttons_single.js","packages/accounts-ui-unstyled/login_buttons_dropdown.js","packages/accounts-ui-unstyled/login_buttons_dialogs.js"],"names":["module","export","passwordSignupFields","passwordlessSignupFields","Accounts","ui","_options","requestPermissions","Object","create","requestOfflineToken","forceApprovalPrompt","VALID_OPTIONS","Set","add","VALID_PASSWORD_SIGNUP_FIELDS","isValidPasswordSignupField","field","has","VALID_PASSWORDLESS_SIGNUP_FIELDS","isValidPasswordlessSignupField","config","options","keys","forEach","key","Error","concat","handlePasswordSignupFields","handlePasswordlessSignupFields","handleRequestPermissions","handleRequestOfflineToken","handleForceApprovalPrompt","Meteor","startup","_Meteor$settings$publ","_Meteor$settings$publ2","settings","public","packages","reportInvalid","Array","isArray","every","assign","_ref","service","scope","_ref2","_ref3","VALID_KEYS","validateKey","includes","KEY_PREFIX","set","value","_set","Session","get","closeDropdown","resetMessages","infoMessage","message","ensureMessageVisible","errorMessage","isMessageDialogVisible","configureService","name","isCordova","_loginButtonsSession","displayName","getLoginServices","hasPasswordService","hasPasswordlessService","dropdown","validateUsername","validateEmail","validatePassword","link","v","loginButtonsSession","Template","loginButtons","events","click #login-buttons-logout","logout","registerHelper","user","profile","username","emails","address","services","Package","oauth","serviceNames","sort","push","map","length","email","password","_loginButtonsLoggedOut","helpers","singleService","configurationLoaded","loginServicesConfigured","_loginButtonsLoggedIn","_loginButtonsLoggedInSingleLogoutButton","_loginButtonsMessages","_loginButtonsLoggingInPadding","loginResultCallback","serviceName","err","LoginCancelledError","ServiceConfiguration","ConfigError","_configureLoginServiceDialog","templateForService","capitalize","reason","onPageLoadLogin","attemptInfo","type","error","_loginButtonsLoggedOutSingleLoginButton","click .login-button","loginWithService","cannotConfigure","configurations","findOne","configured","capitalizedName","input","str","String","charAt","toUpperCase","slice","elementValueById","id","element","document","getElementById","trimmedElementValueById","replace","loginOrSignup","signup","login","loginOrSignupPasswordless","token","passwordlessLoginWithToken","forbidClientAccountCreation","requestLoginTokenForUser","selector","userData","result","_result$selector","usernameOrEmail","loginSelector","loginWithPassword","matchPasswordAgainIfPresent","createUser","forgotPassword","changePassword","oldPassword","passwordAgain","isInPasswordSignupFields","fieldOrFields","signupFields","reduce","prev","isInPasswordlessSignupFields","click #login-name-link, click #login-sign-in-link","_loginButtonsLoggedInDropdown","click #login-buttons-open-change-password","inChangePasswordFlow","inMessageOnlyFlow","dropdownVisible","_loginButtonsLoggedInDropdownActions","allowChangingPassword","_loginButtonsLoggedOutDropdown","event","preventDefault","keyCode","click #signup-link","Tracker","flush","redraw","style","display","offsetHeight","click #forgot-password-link","click #resend-passwordless-code","click #back-to-login-link","usernameOrEmailInput","additionalClasses","_loginButtonsLoggedOutAllServices","isPasswordService","isPasswordlessService","hasOtherServices","count","displaySeparatorForPasswordless","isInternalService","hasInternalService","_loginButtonsLoggedOutPasswordlessService","fields","fieldName","fieldLabel","autocomplete","inputType","visible","inForgotPasswordFlow","inPasswordlessConfirmation","inLoginFlow","inSignupFlow","showCreateAccountLink","_loginButtonsLoggedOutPasswordService","loginFields","showForgotPasswordLink","_loginButtonsFormField","_loginButtonsChangePassword","fieldStyle","fieldValue","doneCallback","onResetPasswordLink","done","onEnrollmentLink","onEmailVerificationLink","verifyEmail","_resetPasswordDialog","click #login-buttons-reset-password-button","resetPassword","click #login-buttons-cancel-reset-password","newPassword","inResetPasswordFlow","_justResetPasswordDialog","click #just-verified-dismiss-button","enrollAccount","_enrollAccountDialog","click #login-buttons-cancel-enroll-account","inEnrollAccountFlow","_justVerifiedEmailDialog","_loginButtonsMessagesDialog","click #messages-dialog-dismiss-button","hasMessage","click .configure-login-service-dismiss-button","click #configure-login-service-dialog-save-configuration","configuration","configurationFields","property","inputs","call","getElementsByTagName","loginStyle","querySelector","connection","_debug","target","indexOf","updateSaveDisabled","anyFieldEmpty","template","configurationSteps","saveDisabled","_configureLoginOnDesktopDialog","click #configure-on-desktop-dismiss-button"],"mappings":"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","file":"/packages/accounts-ui-unstyled.js","sourcesContent":["/**\n * @summary Accounts UI\n * @namespace\n * @memberOf Accounts\n * @importFromPackage accounts-base\n */\nAccounts.ui = {\n  _options: {\n    requestPermissions: Object.create(null),\n    requestOfflineToken: Object.create(null),\n    forceApprovalPrompt: Object.create(null),\n  },\n};\n\nconst VALID_OPTIONS = new Set()\n  .add('passwordSignupFields')\n  .add('requestPermissions')\n  .add('requestOfflineToken')\n  .add('forceApprovalPrompt')\n  .add('passwordlessSignupFields');\n\nconst VALID_PASSWORD_SIGNUP_FIELDS = new Set()\n  .add('USERNAME_AND_EMAIL')\n  .add('USERNAME_AND_OPTIONAL_EMAIL')\n  .add('USERNAME_ONLY')\n  .add('EMAIL_ONLY');\n\nfunction isValidPasswordSignupField(field) {\n  return VALID_PASSWORD_SIGNUP_FIELDS.has(field);\n}\n\nconst VALID_PASSWORDLESS_SIGNUP_FIELDS = new Set()\n  .add('USERNAME_AND_EMAIL')\n  .add('EMAIL_ONLY');\n\nfunction isValidPasswordlessSignupField(field) {\n  return VALID_PASSWORDLESS_SIGNUP_FIELDS.has(field);\n}\n\n/**\n * @summary Configure the behavior of [`{{> loginButtons}}`](#accountsui).\n * @locus Client\n * @param {Object} options\n * @param {Object} options.requestPermissions Which [permissions](#requestpermissions) to request from the user for each external service.\n * @param {Object} options.requestOfflineToken To ask the user for permission to act on their behalf when offline, map the relevant external service to `true`. Currently only supported with Google. See [Meteor.loginWithExternalService](#meteor_loginwithexternalservice) for more details.\n * @param {Object} options.forceApprovalPrompt If true, forces the user to approve the app's permissions, even if previously approved. Currently only supported with Google.\n * @param {String} options.passwordSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`USERNAME_AND_OPTIONAL_EMAIL`', '`USERNAME_ONLY`', or '`EMAIL_ONLY`' (default).\n * @param {String} options.passwordlessSignupFields Which fields to display in the user creation form. One of '`USERNAME_AND_EMAIL`', '`EMAIL_ONLY`' (default).\n * @importFromPackage accounts-base\n */\nAccounts.ui.config = options => {\n  Object.keys(options).forEach(key => {\n    if (!VALID_OPTIONS.has(key)) {\n      throw new Error(`Accounts.ui.config: Invalid option: ${key}`);\n    }\n  });\n\n  handlePasswordSignupFields(options);\n  handlePasswordlessSignupFields(options);\n  handleRequestPermissions(options);\n  handleRequestOfflineToken(options);\n  handleForceApprovalPrompt(options);\n};\n\nMeteor.startup(function() {\n  const settings = Meteor.settings.public?.packages?.['accounts-ui-unstyled'];\n\n  if (settings) {\n    Accounts.ui.config(settings);\n  }\n});\n\nfunction handlePasswordlessSignupFields(options) {\n  let { passwordlessSignupFields } = options;\n\n  if (passwordlessSignupFields) {\n    const reportInvalid = () => {\n      throw new Error(\n        `Accounts.ui.config: Invalid option for \\`passwordlessSignupFields\\`: ${passwordlessSignupFields}`\n      );\n    };\n\n    if (typeof passwordlessSignupFields === 'string') {\n      passwordlessSignupFields = [passwordlessSignupFields];\n    } else if (!Array.isArray(passwordlessSignupFields)) {\n      reportInvalid();\n    }\n\n    if (passwordlessSignupFields.every(isValidPasswordlessSignupField)) {\n      if (Accounts.ui._options.passwordlessSignupFields) {\n        throw new Error(\n          \"Accounts.ui.config: Can't set `passwordlessSignupFields` more than once\"\n        );\n      }\n      Object.assign(Accounts.ui._options, { passwordlessSignupFields });\n      return;\n    }\n\n    reportInvalid();\n  }\n}\n\nfunction handlePasswordSignupFields(options) {\n  let { passwordSignupFields } = options;\n\n  if (passwordSignupFields) {\n    const reportInvalid = () => {\n      throw new Error(\n        `Accounts.ui.config: Invalid option for \\`passwordSignupFields\\`: ${passwordSignupFields}`\n      );\n    };\n\n    if (typeof passwordSignupFields === 'string') {\n      passwordSignupFields = [passwordSignupFields];\n    } else if (!Array.isArray(passwordSignupFields)) {\n      reportInvalid();\n    }\n\n    if (passwordSignupFields.every(isValidPasswordSignupField)) {\n      if (Accounts.ui._options.passwordSignupFields) {\n        throw new Error(\n          \"Accounts.ui.config: Can't set `passwordSignupFields` more than once\"\n        );\n      }\n      Object.assign(Accounts.ui._options, { passwordSignupFields });\n      return;\n    }\n\n    reportInvalid();\n  }\n}\n\nexport function passwordSignupFields() {\n  const { passwordSignupFields } = Accounts.ui._options;\n\n  if (Array.isArray(passwordSignupFields)) {\n    return passwordSignupFields;\n  }\n\n  if (typeof passwordSignupFields === 'string') {\n    return [passwordSignupFields];\n  }\n\n  return ['EMAIL_ONLY'];\n}\n\nexport function passwordlessSignupFields() {\n  const { passwordlessSignupFields } = Accounts.ui._options;\n\n  if (Array.isArray(passwordlessSignupFields)) {\n    return passwordlessSignupFields;\n  }\n\n  if (typeof passwordlessSignupFields === 'string') {\n    return [passwordlessSignupFields];\n  }\n\n  return ['EMAIL_ONLY'];\n}\n\nfunction handleRequestPermissions({ requestPermissions }) {\n  if (requestPermissions) {\n    Object.keys(requestPermissions).forEach(service => {\n      if (Accounts.ui._options.requestPermissions[service]) {\n        throw new Error(\n          `Accounts.ui.config: Can't set \\`requestPermissions\\` more than once for ${service}`\n        );\n      }\n\n      const scope = requestPermissions[service];\n\n      if (!Array.isArray(scope)) {\n        throw new Error(\n          'Accounts.ui.config: Value for `requestPermissions` must be an array'\n        );\n      }\n\n      Accounts.ui._options.requestPermissions[service] = scope;\n    });\n  }\n}\n\nfunction handleRequestOfflineToken({ requestOfflineToken }) {\n  if (requestOfflineToken) {\n    Object.keys(requestOfflineToken).forEach(service => {\n      if (service !== 'google') {\n        throw new Error(\n          'Accounts.ui.config: `requestOfflineToken` only supported for Google login at the moment.'\n        );\n      }\n\n      if (Accounts.ui._options.requestOfflineToken[service]) {\n        throw new Error(\n          `Accounts.ui.config: Can't set \\`requestOfflineToken\\` more than once for ${service}`\n        );\n      }\n\n      Accounts.ui._options.requestOfflineToken[service] =\n        requestOfflineToken[service];\n    });\n  }\n}\n\nfunction handleForceApprovalPrompt({ forceApprovalPrompt }) {\n  if (forceApprovalPrompt) {\n    Object.keys(forceApprovalPrompt).forEach(service => {\n      if (service !== 'google') {\n        throw new Error(\n          'Accounts.ui.config: `forceApprovalPrompt` only supported for Google login at the moment.'\n        );\n      }\n\n      if (Accounts.ui._options.forceApprovalPrompt[service]) {\n        throw new Error(\n          `Accounts.ui.config: Can't set \\`forceApprovalPrompt\\` more than once for ${service}`\n        );\n      }\n\n      Accounts.ui._options.forceApprovalPrompt[service] =\n        forceApprovalPrompt[service];\n    });\n  }\n}\n","const VALID_KEYS = [\n  'dropdownVisible',\n\n  // XXX consider replacing these with one key that has an enum for values.\n  'inSignupFlow',\n  'inForgotPasswordFlow',\n  'inChangePasswordFlow',\n  'inMessageOnlyFlow',\n  'inPasswordlessConfirmation',\n  'passwordlessCodeEmail',\n\n  'errorMessage',\n  'infoMessage',\n\n  // dialogs with messages (info and error)\n  'resetPasswordToken',\n  'enrollAccountToken',\n  'justVerifiedEmail',\n  'justResetPassword',\n\n  'configureLoginServiceDialogVisible',\n  'configureLoginServiceDialogServiceName',\n  'configureLoginServiceDialogSaveDisabled',\n  'configureOnDesktopVisible',\n];\n\nconst validateKey = key => {\n  if (!VALID_KEYS.includes(key))\n    throw new Error(`Invalid key in loginButtonsSession: ${key}`);\n};\n\nconst KEY_PREFIX = \"Meteor.loginButtons.\";\n\n// XXX This should probably be package scope rather than exported\n// (there was even a comment to that effect here from before we had\n// namespacing) but accounts-ui-viewer uses it, so leave it as is for\n// now\nconst set = (key, value) => {\n  validateKey(key);\n  if (['errorMessage', 'infoMessage'].includes(key))\n    throw new Error(\"Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().\");\n\n  _set(key, value);\n};\n\nconst _set = (key, value) => Session.set(KEY_PREFIX + key, value);\n\nconst get = key => {\n  validateKey(key);\n  return Session.get(KEY_PREFIX + key);\n};\n\nconst closeDropdown = () => {\n  set('inSignupFlow', false);\n  set('inForgotPasswordFlow', false);\n  set('inChangePasswordFlow', false);\n  set('inMessageOnlyFlow', false);\n  set('dropdownVisible', false);\n  resetMessages();\n};\n\nconst infoMessage = message => {\n  _set(\"errorMessage\", null);\n  _set(\"infoMessage\", message);\n  ensureMessageVisible();\n};\n\nconst errorMessage = message => {\n  _set(\"errorMessage\", message);\n  _set(\"infoMessage\", null);\n  ensureMessageVisible();\n};\n\n// is there a visible dialog that shows messages (info and error)\nconst isMessageDialogVisible = () => {\n  return get('resetPasswordToken') ||\n    get('enrollAccountToken') ||\n    get('justVerifiedEmail');\n};\n\n// ensure that somethings displaying a message (info or error) is\n// visible. If a dialog with messages is open, do nothing;\n// otherwise open the dropdown.\n//\n// Notably this doesn't matter when only displaying a single login\n// button since then we have an explicit message dialog\n// (_loginButtonsMessageDialog), and dropdownVisible is ignored in\n// this case.\nconst ensureMessageVisible = () => {\n  if (!isMessageDialogVisible())\n    set(\"dropdownVisible\", true);\n};\n\nconst resetMessages = () => {\n  _set(\"errorMessage\", null);\n  _set(\"infoMessage\", null);\n};\n\nconst configureService = name => {\n  if (Meteor.isCordova) {\n    set('configureOnDesktopVisible', true);\n  } else {\n    set('configureLoginServiceDialogVisible', true);\n    set('configureLoginServiceDialogServiceName', name);\n    set('configureLoginServiceDialogSaveDisabled', true);\n  }\n};\n\nAccounts._loginButtonsSession = {\n  set,\n  _set,\n  get,\n  closeDropdown,\n  infoMessage,\n  errorMessage,\n  isMessageDialogVisible,\n  ensureMessageVisible,\n  resetMessages,\n  configureService,\n};\n","import { passwordSignupFields } from './accounts_ui.js';\n\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n// shared between dropdown and single mode\nTemplate.loginButtons.events({\n  'click #login-buttons-logout': () =>\n    Meteor.logout(() => loginButtonsSession.closeDropdown()),\n});\n\nTemplate.registerHelper('loginButtons', () => {\n  throw new Error(\"Use {{> loginButtons}} instead of {{loginButtons}}\");\n});\n\n//\n// helpers\n//\n\nexport const displayName = () => {\n  const user = Meteor.user();\n  if (!user)\n    return '';\n\n  if (user.profile && user.profile.name)\n    return user.profile.name;\n  if (user.username)\n    return user.username;\n  if (user.emails && user.emails[0] && user.emails[0].address)\n    return user.emails[0].address;\n\n  return '';\n};\n\n// returns an array of the login services used by this app. each\n// element of the array is an object (eg {name: 'facebook'}), since\n// that makes it useful in combination with handlebars {{#each}}.\n//\n// don't cache the output of this function: if called during startup (before\n// oauth packages load) it might not include them all.\n//\n// NOTE: It is very important to have this return password last\n// because of the way we render the different providers in\n// login_buttons_dropdown.html\nexport const getLoginServices = () => {\n  // First look for OAuth services.\n  const services = Package['accounts-oauth'] ? Accounts.oauth.serviceNames() : [];\n\n  // Be equally kind to all login services. This also preserves\n  // backwards-compatibility. (But maybe order should be\n  // configurable?)\n  services.sort();\n\n  // Add password, if it's there; it must come last.\n  if (hasPasswordService())\n    services.push('password');\n\n  if (hasPasswordlessService())\n    services.push('passwordless');\n\n  return services.map(name => ({ name }));\n};\n\nexport const hasPasswordService = () => !!Package['accounts-password'];\n\nexport const hasPasswordlessService = () => !!Package['accounts-passwordless'];\n\nexport const dropdown = () =>\n  hasPasswordService() || hasPasswordlessService() || getLoginServices().length > 1;\n\n// XXX improve these. should this be in accounts-password instead?\n//\n// XXX these will become configurable, and will be validated on\n// the server as well.\nexport const validateUsername = username => {\n  if (username.length >= 3) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Username must be at least 3 characters long\");\n    return false;\n  }\n};\n\nexport const validateEmail = email => {\n  if (passwordSignupFields() === \"USERNAME_AND_OPTIONAL_EMAIL\" && email === '')\n    return true;\n\n  if (email.includes('@')) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n    return false;\n  }\n};\n\nexport const validatePassword = password => {\n  if (password.length >= 6) {\n    return true;\n  } else {\n    loginButtonsSession.errorMessage(\"Password must be at least 6 characters long\");\n    return false;\n  }\n};\n\n//\n// loginButtonLoggedOut template\n//\n\nTemplate._loginButtonsLoggedOut.helpers({\n  dropdown,\n  services: getLoginServices,\n  singleService: () => {\n    const services = getLoginServices();\n    if (services.length !== 1)\n      throw new Error(\n        \"Shouldn't be rendering this template with more than one configured service\");\n    return services[0];\n  },\n  configurationLoaded: () => Accounts.loginServicesConfigured(),\n});\n\n\n//\n// loginButtonsLoggedIn template\n//\n\n  // decide whether we should show a dropdown rather than a row of\n  // buttons\nTemplate._loginButtonsLoggedIn.helpers({ dropdown });\n\n\n\n//\n// loginButtonsLoggedInSingleLogoutButton template\n//\n\nTemplate._loginButtonsLoggedInSingleLogoutButton.helpers({ displayName });\n\n\n\n//\n// loginButtonsMessage template\n//\n\nTemplate._loginButtonsMessages.helpers({\n  errorMessage: () => loginButtonsSession.get('errorMessage'),\n});\n\nTemplate._loginButtonsMessages.helpers({\n  infoMessage: () => loginButtonsSession.get('infoMessage'),\n});\n\n\n//\n// loginButtonsLoggingInPadding template\n//\n\nTemplate._loginButtonsLoggingInPadding.helpers({ dropdown });\n","import { getLoginServices } from './login_buttons.js';\n\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n\nconst loginResultCallback = (serviceName, err) => {\n  if (!err) {\n    loginButtonsSession.closeDropdown();\n  } else if (err instanceof Accounts.LoginCancelledError) {\n    // do nothing\n  } else if (err instanceof ServiceConfiguration.ConfigError) {\n    if (Template._configureLoginServiceDialog.templateForService(serviceName)) {\n      loginButtonsSession.configureService(serviceName);\n    } else {\n      loginButtonsSession.errorMessage(\n        `No configuration for ${capitalize(serviceName)}.\\n` +\n        \"Use `ServiceConfiguration` to configure it or \" +\n        `install the \\`${serviceName}-config-ui\\` package.`\n      );\n    }\n  } else {\n    loginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n  }\n};\n\n\n// In the login redirect flow, we'll have the result of the login\n// attempt at page load time when we're redirected back to the\n// application.  Register a callback to update the UI (i.e. to close\n// the dialog on a successful login or display the error on a failed\n// login).\n//\nAccounts.onPageLoadLogin(attemptInfo => {\n  // Ignore if we have a left over login attempt for a service that is no longer registered.\n  if (\n    getLoginServices()\n      .map(service => service.name)\n      .includes(attemptInfo.type)\n  )\n    loginResultCallback(attemptInfo.type, attemptInfo.error);\n});\n\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.events({\n  'click .login-button': function () {\n    const serviceName = this.name;\n    loginButtonsSession.resetMessages();\n\n    // XXX Service providers should be able to specify their\n    // `Meteor.loginWithX` method name.\n    const loginWithService = Meteor[`loginWith${\n                                  (serviceName === 'meteor-developer' ?\n                                   'MeteorDeveloperAccount' :\n                                   capitalize(serviceName))}`];\n\n    const options = {}; // use default scope unless specified\n    if (Accounts.ui._options.requestPermissions[serviceName])\n      options.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n    if (Accounts.ui._options.requestOfflineToken[serviceName])\n      options.requestOfflineToken = Accounts.ui._options.requestOfflineToken[serviceName];\n    if (Accounts.ui._options.forceApprovalPrompt[serviceName])\n      options.forceApprovalPrompt = Accounts.ui._options.forceApprovalPrompt[serviceName];\n\n    loginWithService(options, err => {\n      loginResultCallback(serviceName, err);\n    });\n  }\n});\n\nTemplate._loginButtonsLoggedOutSingleLoginButton.helpers({\n  // not configured and has no config UI\n  cannotConfigure: function () {\n    return !ServiceConfiguration.configurations.findOne({service: this.name}) &&\n      !Template._configureLoginServiceDialog.templateForService(this.name);\n  },\n  configured: function () {\n    return !!ServiceConfiguration.configurations.findOne({service: this.name});\n  },\n  capitalizedName: function () {\n    if (this.name === 'github')\n      // XXX we should allow service packages to set their capitalized name\n      return 'GitHub';\n    else if (this.name === 'meteor-developer')\n      return 'Meteor';\n    else\n      return capitalize(this.name);\n  }\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = input => {\n  const str = input == null ? '' : String(input);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n","import {passwordlessSignupFields, passwordSignupFields} from './accounts_ui.js';\nimport {\n  displayName,\n  getLoginServices,\n  hasPasswordService,\n  hasPasswordlessService,\n  validateUsername,\n  validateEmail,\n  validatePassword,\n} from './login_buttons.js';\n\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n//\n// helpers\n//\n\nconst elementValueById = id => {\n  const element = document.getElementById(id);\n  if (!element)\n    return null;\n  else\n    return element.value;\n};\n\nconst trimmedElementValueById = id => {\n  const element = document.getElementById(id);\n  if (!element)\n    return null;\n  else\n    return element.value.replace(/^\\s*|\\s*$/g, \"\"); // trim() doesn't work on IE8;\n};\n\nconst loginOrSignup = () => {\n  if (loginButtonsSession.get('inSignupFlow'))\n    signup();\n  else\n    login();\n};\n\nconst loginOrSignupPasswordless = () => {\n  loginButtonsSession.resetMessages();\n\n  if (loginButtonsSession.get('inPasswordlessConfirmation')) {\n    const token = trimmedElementValueById('login-code-passwordless');\n    Meteor.passwordlessLoginWithToken({ email: loginButtonsSession.get('passwordlessCodeEmail') }, token, (error) => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('inPasswordlessConfirmation', false);\n        loginButtonsSession.set('passwordlessCodeEmail', null);\n      }\n    });\n\n    return;\n  }\n\n  const email = trimmedElementValueById('login-email-passwordless');\n  const username = trimmedElementValueById('login-username-passwordless');\n\n  if (!email.includes('@')) {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n    return;\n  }\n  if (Accounts._options.forbidClientAccountCreation) {\n    loginButtonsSession.errorMessage(\"Action not allowed\");\n    return;\n  }\n\n  if (username !== null && !validateUsername(username)) {\n    return;\n  }\n\n  Accounts.requestLoginTokenForUser({ selector: email, userData: { email, username } }, (error, result) => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('inPasswordlessConfirmation', true);\n      loginButtonsSession.set('inSignupFlow', false);\n      loginButtonsSession.set('passwordlessCodeEmail', result?.selector?.email);\n    }\n  });\n}\n\nconst login = () => {\n  loginButtonsSession.resetMessages();\n\n  const username = trimmedElementValueById('login-username');\n  const email = trimmedElementValueById('login-email');\n  const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n\n  let loginSelector;\n  if (username !== null) {\n    if (!validateUsername(username))\n      return;\n    else\n      loginSelector = {username: username};\n  } else if (email !== null) {\n    if (!validateEmail(email))\n      return;\n    else\n      loginSelector = {email: email};\n  } else if (usernameOrEmail !== null) {\n    // XXX not sure how we should validate this. but this seems good enough (for now),\n    // since an email must have at least 3 characters anyways\n    if (!validateUsername(usernameOrEmail))\n      return;\n    else\n      loginSelector = usernameOrEmail;\n  } else {\n    throw new Error(\"Unexpected -- no element to use as a login user selector\");\n  }\n\n  Meteor.loginWithPassword(loginSelector, password, (error, result) => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.closeDropdown();\n    }\n  });\n};\n\nconst signup = () => {\n  loginButtonsSession.resetMessages();\n\n  const options = {}; // to be passed to Accounts.createUser\n\n  const username = trimmedElementValueById('login-username');\n  if (username !== null) {\n    if (!validateUsername(username))\n      return;\n    else\n      options.username = username;\n  }\n\n  const email = trimmedElementValueById('login-email');\n  if (email !== null) {\n    if (!validateEmail(email))\n      return;\n    else\n      options.email = email;\n  }\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n  if (!validatePassword(password))\n    return;\n  else\n    options.password = password;\n\n  if (!matchPasswordAgainIfPresent())\n    return;\n\n  Accounts.createUser(options, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.closeDropdown();\n    }\n  });\n};\n\nconst forgotPassword = () => {\n  loginButtonsSession.resetMessages();\n\n  const email = trimmedElementValueById(\"forgot-password-email\");\n  if (email.includes('@')) {\n    Accounts.forgotPassword({email: email}, error => {\n      if (error)\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      else\n        loginButtonsSession.infoMessage(\"Email sent\");\n    });\n  } else {\n    loginButtonsSession.errorMessage(\"Invalid email\");\n  }\n};\n\nconst changePassword = () => {\n  loginButtonsSession.resetMessages();\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const oldPassword = elementValueById('login-old-password');\n\n  // notably not trimmed. a password could (?) start or end with a space\n  const password = elementValueById('login-password');\n  if (!validatePassword(password))\n    return;\n\n  if (!matchPasswordAgainIfPresent())\n    return;\n\n  Accounts.changePassword(oldPassword, password, error => {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('inChangePasswordFlow', false);\n      loginButtonsSession.set('inMessageOnlyFlow', true);\n      loginButtonsSession.infoMessage(\"Password changed\");\n    }\n  });\n};\n\nconst matchPasswordAgainIfPresent = () => {\n  // notably not trimmed. a password could (?) start or end with a space\n  const passwordAgain = elementValueById('login-password-again');\n  if (passwordAgain !== null) {\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n    if (password !== passwordAgain) {\n      loginButtonsSession.errorMessage(\"Passwords don't match\");\n      return false;\n    }\n  }\n  return true;\n};\n\n// Utility containment function that works with both arrays and single values\nconst isInPasswordSignupFields = (fieldOrFields) => {\n  const signupFields = passwordSignupFields();\n\n  if (Array.isArray(fieldOrFields)) {\n    return signupFields.reduce(\n      (prev, field) => prev && fieldOrFields.includes(field),\n      true,\n    )\n  }\n\n  return signupFields.includes(fieldOrFields);\n};\n\nconst isInPasswordlessSignupFields = (fieldOrFields) => {\n  const signupFields = passwordlessSignupFields();\n\n  if (Array.isArray(fieldOrFields)) {\n    return signupFields.reduce(\n      (prev, field) => prev && fieldOrFields.includes(field),\n      true,\n    )\n  }\n\n  return signupFields.includes(fieldOrFields);\n}\n\n// events shared between loginButtonsLoggedOutDropdown and\n// loginButtonsLoggedInDropdown\nTemplate.loginButtons.events({\n  'click #login-name-link, click #login-sign-in-link': () =>\n    loginButtonsSession.set('dropdownVisible', true),\n  'click .login-close-text': loginButtonsSession.closeDropdown,\n});\n\n\n//\n// loginButtonsLoggedInDropdown template and related\n//\n\nTemplate._loginButtonsLoggedInDropdown.events({\n  'click #login-buttons-open-change-password': () => {\n    loginButtonsSession.resetMessages();\n    loginButtonsSession.set('inChangePasswordFlow', true);\n  }\n});\n\nTemplate._loginButtonsLoggedInDropdown.helpers({\n  displayName,\n  inChangePasswordFlow: () => loginButtonsSession.get('inChangePasswordFlow'),\n  inMessageOnlyFlow: () => loginButtonsSession.get('inMessageOnlyFlow'),\n  dropdownVisible: () => loginButtonsSession.get('dropdownVisible'),\n});\n\nTemplate._loginButtonsLoggedInDropdownActions.helpers({\n  allowChangingPassword: () => {\n    // it would be more correct to check whether the user has a password set,\n    // but in order to do that we'd have to send more data down to the client,\n    // and it'd be preferable not to send down the entire service.password document.\n    //\n    // instead we use the heuristic: if the user has a username or email set.\n    if (!Package['accounts-password']) return false;\n    const user = Meteor.user();\n    return user.username || (user.emails && user.emails[0] && user.emails[0].address);\n  }\n});\n\n\n//\n// loginButtonsLoggedOutDropdown template and related\n//\n\nTemplate._loginButtonsLoggedOutDropdown.events({\n  'click #login-buttons-password': event => {\n    event.preventDefault();\n    loginOrSignup();\n  },\n\n  'click #login-buttons-passwordless': event => {\n    event.preventDefault();\n    loginOrSignupPasswordless();\n  },\n\n  'keypress #forgot-password-email': event => {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      forgotPassword();\n    }\n  },\n\n  'click #login-buttons-forgot-password': forgotPassword,\n\n  'click #signup-link': () => {\n    loginButtonsSession.resetMessages();\n\n    // store values of fields before swtiching to the signup form\n    const username = trimmedElementValueById('login-username');\n    const email = trimmedElementValueById('login-email');\n    const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n\n    loginButtonsSession.set('inSignupFlow', true);\n    loginButtonsSession.set('inForgotPasswordFlow', false);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n\n    // update new fields with appropriate defaults\n    if (username !== null)\n      document.getElementById('login-username').value = username;\n    else if (email !== null)\n      document.getElementById('login-email').value = email;\n    else if (usernameOrEmail !== null)\n      if (!usernameOrEmail.includes('@'))\n        document.getElementById('login-username').value = usernameOrEmail;\n    else\n      document.getElementById('login-email').value = usernameOrEmail;\n\n    if (password !== null)\n      document.getElementById('login-password').value = password;\n\n    // Force redrawing the `login-dropdown-list` element because of\n    // a bizarre Chrome bug in which part of the DIV is not redrawn\n    // in case you had tried to unsuccessfully log in before\n    // switching to the signup form.\n    //\n    // Found tip on how to force a redraw on\n    // http://stackoverflow.com/questions/3485365/how-can-i-force-webkit-to-redraw-repaint-to-propagate-style-changes/3485654#3485654\n    const redraw = document.getElementById('login-dropdown-list');\n    redraw.style.display = 'none';\n    redraw.offsetHeight; // it seems that this line does nothing but is necessary for the redraw to work\n    redraw.style.display = 'block';\n  },\n  'click #forgot-password-link': () => {\n    loginButtonsSession.resetMessages();\n\n    // store values of fields before swtiching to the signup form\n    const email = trimmedElementValueById('login-email');\n    const usernameOrEmail = trimmedElementValueById('login-username-or-email');\n\n    loginButtonsSession.set('inSignupFlow', false);\n    loginButtonsSession.set('inForgotPasswordFlow', true);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n\n    // update new fields with appropriate defaults\n    if (email !== null)\n      document.getElementById('forgot-password-email').value = email;\n    else if (usernameOrEmail !== null)\n      if (usernameOrEmail.includes('@'))\n        document.getElementById('forgot-password-email').value = usernameOrEmail;\n\n  },\n  'click #resend-passwordless-code': () => {\n    loginButtonsSession.set('inPasswordlessConfirmation', false);\n    loginButtonsSession.set('passwordlessCodeEmail', null);\n  },\n  'click #back-to-login-link': () => {\n    loginButtonsSession.resetMessages();\n\n    const username = trimmedElementValueById('login-username');\n    const email = trimmedElementValueById('login-email')\n          || trimmedElementValueById('forgot-password-email'); // Ughh. Standardize on names?\n    // notably not trimmed. a password could (?) start or end with a space\n    const password = elementValueById('login-password');\n\n    loginButtonsSession.set('inSignupFlow', false);\n    loginButtonsSession.set('inForgotPasswordFlow', false);\n    // force the ui to update so that we have the approprate fields to fill in\n    Tracker.flush();\n\n    if (document.getElementById('login-username') && username !== null)\n      document.getElementById('login-username').value = username;\n    if (document.getElementById('login-email') && email !== null)\n      document.getElementById('login-email').value = email;\n\n    const usernameOrEmailInput = document.getElementById('login-username-or-email');\n    if (usernameOrEmailInput) {\n      if (email !== null)\n        usernameOrEmailInput.value = email;\n      if (username !== null)\n        usernameOrEmailInput.value = username;\n    }\n\n    if (password !== null)\n      document.getElementById('login-password').value = password;\n  },\n});\n\nTemplate._loginButtonsLoggedOutDropdown.helpers({\n  // additional classes that can be helpful in styling the dropdown\n  additionalClasses: () => {\n    if (!hasPasswordService() || !hasPasswordlessService()) {\n      return false;\n    } else {\n      if (loginButtonsSession.get('inSignupFlow')) {\n        return 'login-form-create-account';\n      } else if (loginButtonsSession.get('inForgotPasswordFlow')) {\n        return 'login-form-forgot-password';\n      } else {\n        return 'login-form-sign-in';\n      }\n    }\n  },\n\n  dropdownVisible: () => loginButtonsSession.get('dropdownVisible'),\n\n  hasPasswordService,\n  hasPasswordlessService,\n});\n\n// return all login services, with password last\nTemplate._loginButtonsLoggedOutAllServices.helpers({\n  services: getLoginServices,\n  isPasswordService: function () {\n    return this.name === 'password';\n  },\n  isPasswordlessService: function () {\n    return this.name === 'passwordless';\n  },\n  hasOtherServices: () => {\n    let count = 0;\n    if (hasPasswordlessService()) count++;\n    if (hasPasswordService()) count++;\n    return getLoginServices().length > count;\n  },\n  displaySeparatorForPasswordless: () => {\n    return hasPasswordService() || getLoginServices().length > 1;\n  },\n  isInternalService: function () {\n    return this.name === 'password' || this.name === 'passwordless'\n  },\n  hasInternalService: () => hasPasswordService() || hasPasswordlessService(),\n  hasPasswordService,\n  hasPasswordlessService,\n});\n\nTemplate._loginButtonsLoggedOutPasswordlessService.helpers({\n  fields: () => [\n    {\n      fieldName: 'email-passwordless',\n      fieldLabel: 'Email',\n      autocomplete: 'email',\n      inputType: 'email',\n      visible: () => !loginButtonsSession.get('inPasswordlessConfirmation'),\n    },\n    {\n      fieldName: 'username-passwordless',\n      fieldLabel: 'Username',\n      autocomplete: 'username',\n      inputType: 'text',\n      visible: () => isInPasswordlessSignupFields('USERNAME_AND_EMAIL') && loginButtonsSession.get('inSignupFlow')\n    },\n    {\n      fieldName: 'code-passwordless',\n      fieldLabel: 'Code',\n      inputType: 'text',\n      visible: () => loginButtonsSession.get('inPasswordlessConfirmation')\n    }\n  ],\n  inForgotPasswordFlow: () => loginButtonsSession.get('inForgotPasswordFlow'),\n  inPasswordlessConfirmation: () => loginButtonsSession.get('inPasswordlessConfirmation'),\n\n  inLoginFlow: () =>\n    !loginButtonsSession.get('inSignupFlow') &&\n    !loginButtonsSession.get('inForgotPasswordFlow'),\n\n  inSignupFlow: () => loginButtonsSession.get('inSignupFlow'),\n\n  showCreateAccountLink: () => !Accounts._options.forbidClientAccountCreation,\n})\n\nTemplate._loginButtonsLoggedOutPasswordService.helpers({\n  fields: () => {\n    const loginFields = [\n      {fieldName: 'username-or-email', fieldLabel: 'Username or Email',\n        autocomplete: 'username email',\n        visible: () => isInPasswordSignupFields(\n          [\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\"]\n        ),\n      },\n      {fieldName: 'username', fieldLabel: 'Username', autocomplete: 'username',\n        visible: () => isInPasswordSignupFields(\"USERNAME_ONLY\"),\n      },\n      {fieldName: 'email', fieldLabel: 'Email', inputType: 'email',\n        autocomplete: 'email',\n        visible: () => isInPasswordSignupFields(\"EMAIL_ONLY\"),\n      },\n      {fieldName: 'password', fieldLabel: 'Password', inputType: 'password',\n        autocomplete: 'current-password',\n        visible: () => true,\n      }\n    ];\n\n    const signupFields = [\n      {fieldName: 'username', fieldLabel: 'Username', autocomplete: 'username',\n        visible: () => isInPasswordSignupFields([\n          \"USERNAME_AND_EMAIL\",\n          \"USERNAME_AND_OPTIONAL_EMAIL\",\n          \"USERNAME_ONLY\",\n        ]),\n      },\n      {fieldName: 'email', fieldLabel: 'Email', inputType: 'email',\n        autocomplete: 'email',\n        visible: () => isInPasswordSignupFields(\n          [\"USERNAME_AND_EMAIL\", \"EMAIL_ONLY\"]\n        ),\n      },\n      {fieldName: 'email', fieldLabel: 'Email (optional)', inputType: 'email',\n        autocomplete: 'email',\n        visible: () => isInPasswordSignupFields(\"USERNAME_AND_OPTIONAL_EMAIL\"),\n      },\n      {fieldName: 'password', fieldLabel: 'Password', inputType: 'password',\n        autocomplete: 'new-password',\n        visible: () => true,\n      },\n      {fieldName: 'password-again', fieldLabel: 'Password (again)',\n       inputType: 'password', autocomplete: 'new-password',\n        // No need to make users double-enter their password if\n        // they'll necessarily have an email set, since they can use\n        // the \"forgot password\" flow.\n        visible: () => isInPasswordSignupFields(\n          [\"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"]\n        ),\n      },\n    ];\n\n    return loginButtonsSession.get('inSignupFlow') ? signupFields : loginFields;\n  },\n\n  inForgotPasswordFlow: () => loginButtonsSession.get('inForgotPasswordFlow'),\n\n  inLoginFlow: () =>\n    !loginButtonsSession.get('inSignupFlow') &&\n    !loginButtonsSession.get('inForgotPasswordFlow'),\n\n  inSignupFlow: () => loginButtonsSession.get('inSignupFlow'),\n\n  showCreateAccountLink: () => !Accounts._options.forbidClientAccountCreation,\n\n  showForgotPasswordLink: () => isInPasswordSignupFields(\n    [\"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"EMAIL_ONLY\"]\n  ),\n});\n\nTemplate._loginButtonsFormField.helpers({\n  inputType: function () {\n    return this.inputType || \"text\"\n  }\n});\n\n\n//\n// loginButtonsChangePassword template\n//\n\nTemplate._loginButtonsChangePassword.events({\n  'keypress #login-old-password, keypress #login-password, keypress #login-password-again': event => {\n    if (event.keyCode === 13)\n      changePassword();\n  },\n  'click #login-buttons-do-change-password': changePassword,\n});\n\nTemplate._loginButtonsChangePassword.helpers({\n  fields: () => {\n    const { username, emails } = Meteor.user()\n    let email;\n    if (emails) {\n      email = emails[0].address;\n    }\n    return [\n      // The username and email fields are included here to address an\n      // accessibility warning in Chrome, but the fields don't actually display.\n      // The warning states that there should be an optionally hidden\n      // username/email field on password forms.\n      // XXX I think we should not use a CSS class here because this is the\n      // `unstyled` package. So instead we apply an inline style.\n      {fieldName: 'username', fieldLabel: 'Username', autocomplete: 'username',\n        fieldStyle: 'display: none;', fieldValue: username,\n        visible: () => isInPasswordSignupFields([\n          \"USERNAME_AND_EMAIL\",\n          \"USERNAME_AND_OPTIONAL_EMAIL\",\n          \"USERNAME_ONLY\",\n        ]),\n      },\n      {fieldName: 'email', fieldLabel: 'Email', inputType: 'email',\n        autocomplete: 'email', fieldStyle: 'display: none;', fieldValue: email,\n        visible: () => isInPasswordSignupFields(\n          [\"USERNAME_AND_EMAIL\", \"EMAIL_ONLY\"]\n        ),\n      },\n      {fieldName: 'old-password', fieldLabel: 'Current Password', inputType: 'password',\n        autocomplete: 'current-password', visible: () => true,\n      },\n      {fieldName: 'password', fieldLabel: 'New Password', inputType: 'password',\n        autocomplete: 'new-password', visible: () => true,\n      },\n      {fieldName: 'password-again', fieldLabel: 'New Password (again)',\n        inputType: 'password', autocomplete: 'new-password',\n        // No need to make users double-enter their password if\n        // they'll necessarily have an email set, since they can use\n        // the \"forgot password\" flow.\n        visible: () => isInPasswordSignupFields(\n          [\"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"]\n        ),\n      },\n    ];\n  }\n});\n","import { displayName, dropdown, validatePassword } from './login_buttons.js';\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n// since we don't want to pass around the callback that we get from our event\n// handlers, we just make it a variable for the whole file\nlet doneCallback;\n\nAccounts.onResetPasswordLink((token, done) => {\n  loginButtonsSession.set(\"resetPasswordToken\", token);\n  doneCallback = done;\n});\n\nAccounts.onEnrollmentLink((token, done) => {\n  loginButtonsSession.set(\"enrollAccountToken\", token);\n  doneCallback = done;\n});\n\nAccounts.onEmailVerificationLink((token, done) => {\n  Accounts.verifyEmail(token, error => {\n    if (! error) {\n      loginButtonsSession.set('justVerifiedEmail', true);\n    }\n\n    done();\n    // XXX show something if there was an error.\n  });\n});\n\n\n//\n// resetPasswordDialog template\n//\n\nTemplate._resetPasswordDialog.events({\n  'click #login-buttons-reset-password-button': () => resetPassword(),\n  'keypress #reset-password-new-password': event => {\n    if (event.keyCode === 13)\n      resetPassword();\n  },\n  'click #login-buttons-cancel-reset-password': () => {\n    loginButtonsSession.set('resetPasswordToken', null);\n    if (doneCallback)\n      doneCallback();\n  }\n});\n\nconst resetPassword = () => {\n  loginButtonsSession.resetMessages();\n  const newPassword = document.getElementById('reset-password-new-password').value;\n  if (!validatePassword(newPassword))\n    return;\n\n  Accounts.resetPassword(\n    loginButtonsSession.get('resetPasswordToken'), newPassword,\n    error => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('resetPasswordToken', null);\n        loginButtonsSession.set('justResetPassword', true);\n        if (doneCallback)\n          doneCallback();\n      }\n    });\n};\n\nTemplate._resetPasswordDialog.helpers({\n  displayName,\n  inResetPasswordFlow: () => loginButtonsSession.get('resetPasswordToken'),\n});\n\n//\n// justResetPasswordDialog template\n//\n\nTemplate._justResetPasswordDialog.events({\n  'click #just-verified-dismiss-button': () =>\n    loginButtonsSession.set('justResetPassword', false),\n});\n\nTemplate._justResetPasswordDialog.helpers({\n  visible: () => loginButtonsSession.get('justResetPassword'),\n  displayName,\n});\n\n\n\n//\n// enrollAccountDialog template\n//\n\nconst enrollAccount = () => {\n  loginButtonsSession.resetMessages();\n  const password = document.getElementById('enroll-account-password').value;\n  if (!validatePassword(password))\n    return;\n\n  Accounts.resetPassword(\n    loginButtonsSession.get('enrollAccountToken'), password,\n    error => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('enrollAccountToken', null);\n        if (doneCallback)\n          doneCallback();\n      }\n    });\n};\n\nTemplate._enrollAccountDialog.events({\n  'click #login-buttons-enroll-account-button': enrollAccount,\n  'keypress #enroll-account-password': event => {\n    if (event.keyCode === 13)\n      enrollAccount();\n  },\n  'click #login-buttons-cancel-enroll-account': () => {\n    loginButtonsSession.set('enrollAccountToken', null);\n    if (doneCallback)\n      doneCallback();\n  }\n});\n\nTemplate._enrollAccountDialog.helpers({\n  displayName,\n  inEnrollAccountFlow: () => loginButtonsSession.get('enrollAccountToken'),\n});\n\n\n//\n// justVerifiedEmailDialog template\n//\n\nTemplate._justVerifiedEmailDialog.events({\n  'click #just-verified-dismiss-button': () =>\n    loginButtonsSession.set('justVerifiedEmail', false),\n});\n\nTemplate._justVerifiedEmailDialog.helpers({\n  visible: () => loginButtonsSession.get('justVerifiedEmail'),\n  displayName,\n});\n\n\n//\n// loginButtonsMessagesDialog template\n//\n\nTemplate._loginButtonsMessagesDialog.events({\n  'click #messages-dialog-dismiss-button': () =>\n    loginButtonsSession.resetMessages(),\n});\n\nTemplate._loginButtonsMessagesDialog.helpers({\n  visible: () => {\n    const hasMessage = loginButtonsSession.get('infoMessage') || loginButtonsSession.get('errorMessage');\n    return !dropdown() && hasMessage;\n  }\n});\n\n\n//\n// configureLoginServiceDialog template\n//\n\nTemplate._configureLoginServiceDialog.events({\n  'click .configure-login-service-dismiss-button': () =>\n    loginButtonsSession.set('configureLoginServiceDialogVisible', false),\n  'click #configure-login-service-dialog-save-configuration': () => {\n    if (loginButtonsSession.get('configureLoginServiceDialogVisible') &&\n        ! loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')) {\n      // Prepare the configuration document for this login service\n      const serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n      const configuration = {\n        service: serviceName\n      };\n\n      // Fetch the value of each input field\n      configurationFields().forEach(field => {\n        configuration[field.property] = document.getElementById(\n          `configure-login-service-dialog-${field.property}`).value\n          .replace(/^\\s*|\\s*$/g, \"\"); // trim() doesnt work on IE8;\n      });\n\n      // Replacement of single use of jQuery in this package so we can remove\n      // the dependency\n      const inputs = [].slice.call( // Because HTMLCollections aren't arrays\n        document\n          .getElementById('configure-login-service-dialog')\n          .getElementsByTagName('input')\n      );\n\n      configuration.loginStyle =\n        document.querySelector('#configure-login-service-dialog input[name=\"loginStyle\"]:checked').value;\n\n      // Configure this login service\n      Accounts.connection.call(\n        \"configureLoginService\", configuration, (error, result) => {\n          if (error)\n            Meteor._debug(`Error configuring login service ${serviceName}`,\n                          error);\n          else\n            loginButtonsSession.set('configureLoginServiceDialogVisible',\n                                    false);\n        });\n    }\n  },\n  // IE8 doesn't support the 'input' event, so we'll run this on the keyup as\n  // well. (Keeping the 'input' event means that this also fires when you use\n  // the mouse to change the contents of the field, eg 'Cut' menu item.)\n  'input, keyup input': event => {\n    // if the event fired on one of the configuration input fields,\n    // check whether we should enable the 'save configuration' button\n    if (event.target.id.indexOf('configure-login-service-dialog') === 0)\n      updateSaveDisabled();\n  }\n});\n\n// check whether the 'save configuration' button should be enabled.\n// this is a really strange way to implement this and a Forms\n// Abstraction would make all of this reactive, and simpler.\nconst updateSaveDisabled = () => {\n  const anyFieldEmpty = configurationFields().reduce((prev, field) =>\n    prev || document.getElementById(\n      `configure-login-service-dialog-${field.property}`\n    ).value === '',\n    false\n  );\n\n  loginButtonsSession.set('configureLoginServiceDialogSaveDisabled', anyFieldEmpty);\n};\n\n// Returns the appropriate template for this login service.  This\n// template should be defined in the service's package\nTemplate._configureLoginServiceDialog.templateForService = serviceName => {\n  serviceName = serviceName || loginButtonsSession.get('configureLoginServiceDialogServiceName');\n  // XXX Service providers should be able to specify their configuration\n  // template name.\n  return Template[`configureLoginServiceDialogFor${\n                  serviceName === 'meteor-developer' ?\n                   'MeteorDeveloper' :\n                   capitalize(serviceName)}`];\n};\n\nconst configurationFields = () => {\n  const template = Template._configureLoginServiceDialog.templateForService();\n  return template.fields();\n};\n\nTemplate._configureLoginServiceDialog.helpers({\n  configurationFields,\n  visible: () => loginButtonsSession.get('configureLoginServiceDialogVisible'),\n  // renders the appropriate template\n  configurationSteps: () =>\n    Template._configureLoginServiceDialog.templateForService(),\n  saveDisabled: () =>\n    loginButtonsSession.get('configureLoginServiceDialogSaveDisabled'),\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = str => {\n  str = str == null ? '' : String(str);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nTemplate._configureLoginOnDesktopDialog.helpers({\n  visible: () => loginButtonsSession.get('configureOnDesktopVisible'),\n});\n\nTemplate._configureLoginOnDesktopDialog.events({\n  'click #configure-on-desktop-dismiss-button': () =>\n    loginButtonsSession.set('configureOnDesktopVisible', false),\n});\n"]}}]