{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"D:\\mergerware\\loan-management-app\\packages\\accounts-ui-unstyled\\login_buttons_dialogs.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/accounts-ui-unstyled/login_buttons_dialogs.js","filename":"D:\\mergerware\\loan-management-app\\packages\\accounts-ui-unstyled\\login_buttons_dialogs.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"D:\\mergerware\\loan-management-app","root":"D:\\mergerware\\loan-management-app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null,null]},"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"DoWhileStatement":{"exit":[null]},"ForInStatement":{"exit":[null]},"ForStatement":{"exit":[null]},"WhileStatement":{"exit":[null]},"ForOfStatement":{"exit":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-regenerator","visitor":{"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"MemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"D:\\mergerware\\loan-management-app\\packages\\accounts-ui-unstyled\\login_buttons_dialogs.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/accounts-ui-unstyled/login_buttons_dialogs.js"}},"code":"var displayName, dropdown, validatePassword;\nmodule.link(\"./login_buttons.js\", {\n  displayName: function (v) {\n    displayName = v;\n  },\n  dropdown: function (v) {\n    dropdown = v;\n  },\n  validatePassword: function (v) {\n    validatePassword = v;\n  }\n}, 0);\n// for convenience\nvar loginButtonsSession = Accounts._loginButtonsSession;\n\n// since we don't want to pass around the callback that we get from our event\n// handlers, we just make it a variable for the whole file\nvar doneCallback;\nAccounts.onResetPasswordLink(function (token, done) {\n  loginButtonsSession.set(\"resetPasswordToken\", token);\n  doneCallback = done;\n});\nAccounts.onEnrollmentLink(function (token, done) {\n  loginButtonsSession.set(\"enrollAccountToken\", token);\n  doneCallback = done;\n});\nAccounts.onEmailVerificationLink(function (token, done) {\n  Accounts.verifyEmail(token, function (error) {\n    if (!error) {\n      loginButtonsSession.set('justVerifiedEmail', true);\n    }\n    done();\n    // XXX show something if there was an error.\n  });\n});\n\n//\n// resetPasswordDialog template\n//\n\nTemplate._resetPasswordDialog.events({\n  'click #login-buttons-reset-password-button': function () {\n    return resetPassword();\n  },\n  'keypress #reset-password-new-password': function (event) {\n    if (event.keyCode === 13) resetPassword();\n  },\n  'click #login-buttons-cancel-reset-password': function () {\n    loginButtonsSession.set('resetPasswordToken', null);\n    if (doneCallback) doneCallback();\n  }\n});\nvar resetPassword = function () {\n  loginButtonsSession.resetMessages();\n  var newPassword = document.getElementById('reset-password-new-password').value;\n  if (!validatePassword(newPassword)) return;\n  Accounts.resetPassword(loginButtonsSession.get('resetPasswordToken'), newPassword, function (error) {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('resetPasswordToken', null);\n      loginButtonsSession.set('justResetPassword', true);\n      if (doneCallback) doneCallback();\n    }\n  });\n};\nTemplate._resetPasswordDialog.helpers({\n  displayName: displayName,\n  inResetPasswordFlow: function () {\n    return loginButtonsSession.get('resetPasswordToken');\n  }\n});\n\n//\n// justResetPasswordDialog template\n//\n\nTemplate._justResetPasswordDialog.events({\n  'click #just-verified-dismiss-button': function () {\n    return loginButtonsSession.set('justResetPassword', false);\n  }\n});\nTemplate._justResetPasswordDialog.helpers({\n  visible: function () {\n    return loginButtonsSession.get('justResetPassword');\n  },\n  displayName: displayName\n});\n\n//\n// enrollAccountDialog template\n//\n\nvar enrollAccount = function () {\n  loginButtonsSession.resetMessages();\n  var password = document.getElementById('enroll-account-password').value;\n  if (!validatePassword(password)) return;\n  Accounts.resetPassword(loginButtonsSession.get('enrollAccountToken'), password, function (error) {\n    if (error) {\n      loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n    } else {\n      loginButtonsSession.set('enrollAccountToken', null);\n      if (doneCallback) doneCallback();\n    }\n  });\n};\nTemplate._enrollAccountDialog.events({\n  'click #login-buttons-enroll-account-button': enrollAccount,\n  'keypress #enroll-account-password': function (event) {\n    if (event.keyCode === 13) enrollAccount();\n  },\n  'click #login-buttons-cancel-enroll-account': function () {\n    loginButtonsSession.set('enrollAccountToken', null);\n    if (doneCallback) doneCallback();\n  }\n});\nTemplate._enrollAccountDialog.helpers({\n  displayName: displayName,\n  inEnrollAccountFlow: function () {\n    return loginButtonsSession.get('enrollAccountToken');\n  }\n});\n\n//\n// justVerifiedEmailDialog template\n//\n\nTemplate._justVerifiedEmailDialog.events({\n  'click #just-verified-dismiss-button': function () {\n    return loginButtonsSession.set('justVerifiedEmail', false);\n  }\n});\nTemplate._justVerifiedEmailDialog.helpers({\n  visible: function () {\n    return loginButtonsSession.get('justVerifiedEmail');\n  },\n  displayName: displayName\n});\n\n//\n// loginButtonsMessagesDialog template\n//\n\nTemplate._loginButtonsMessagesDialog.events({\n  'click #messages-dialog-dismiss-button': function () {\n    return loginButtonsSession.resetMessages();\n  }\n});\nTemplate._loginButtonsMessagesDialog.helpers({\n  visible: function () {\n    var hasMessage = loginButtonsSession.get('infoMessage') || loginButtonsSession.get('errorMessage');\n    return !dropdown() && hasMessage;\n  }\n});\n\n//\n// configureLoginServiceDialog template\n//\n\nTemplate._configureLoginServiceDialog.events({\n  'click .configure-login-service-dismiss-button': function () {\n    return loginButtonsSession.set('configureLoginServiceDialogVisible', false);\n  },\n  'click #configure-login-service-dialog-save-configuration': function () {\n    if (loginButtonsSession.get('configureLoginServiceDialogVisible') && !loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')) {\n      // Prepare the configuration document for this login service\n      var serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n      var configuration = {\n        service: serviceName\n      };\n\n      // Fetch the value of each input field\n      configurationFields().forEach(function (field) {\n        configuration[field.property] = document.getElementById(\"configure-login-service-dialog-\" + field.property).value.replace(/^\\s*|\\s*$/g, \"\"); // trim() doesnt work on IE8;\n      });\n\n      // Replacement of single use of jQuery in this package so we can remove\n      // the dependency\n      var inputs = [].slice.call(\n      // Because HTMLCollections aren't arrays\n      document.getElementById('configure-login-service-dialog').getElementsByTagName('input'));\n      configuration.loginStyle = document.querySelector('#configure-login-service-dialog input[name=\"loginStyle\"]:checked').value;\n\n      // Configure this login service\n      Accounts.connection.call(\"configureLoginService\", configuration, function (error, result) {\n        if (error) Meteor._debug(\"Error configuring login service \" + serviceName, error);else loginButtonsSession.set('configureLoginServiceDialogVisible', false);\n      });\n    }\n  },\n  // IE8 doesn't support the 'input' event, so we'll run this on the keyup as\n  // well. (Keeping the 'input' event means that this also fires when you use\n  // the mouse to change the contents of the field, eg 'Cut' menu item.)\n  'input, keyup input': function (event) {\n    // if the event fired on one of the configuration input fields,\n    // check whether we should enable the 'save configuration' button\n    if (event.target.id.indexOf('configure-login-service-dialog') === 0) updateSaveDisabled();\n  }\n});\n\n// check whether the 'save configuration' button should be enabled.\n// this is a really strange way to implement this and a Forms\n// Abstraction would make all of this reactive, and simpler.\nvar updateSaveDisabled = function () {\n  var anyFieldEmpty = configurationFields().reduce(function (prev, field) {\n    return prev || document.getElementById(\"configure-login-service-dialog-\" + field.property).value === '';\n  }, false);\n  loginButtonsSession.set('configureLoginServiceDialogSaveDisabled', anyFieldEmpty);\n};\n\n// Returns the appropriate template for this login service.  This\n// template should be defined in the service's package\nTemplate._configureLoginServiceDialog.templateForService = function (serviceName) {\n  serviceName = serviceName || loginButtonsSession.get('configureLoginServiceDialogServiceName');\n  // XXX Service providers should be able to specify their configuration\n  // template name.\n  return Template[\"configureLoginServiceDialogFor\" + (serviceName === 'meteor-developer' ? 'MeteorDeveloper' : capitalize(serviceName))];\n};\nvar configurationFields = function () {\n  var template = Template._configureLoginServiceDialog.templateForService();\n  return template.fields();\n};\nTemplate._configureLoginServiceDialog.helpers({\n  configurationFields: configurationFields,\n  visible: function () {\n    return loginButtonsSession.get('configureLoginServiceDialogVisible');\n  },\n  // renders the appropriate template\n  configurationSteps: function () {\n    return Template._configureLoginServiceDialog.templateForService();\n  },\n  saveDisabled: function () {\n    return loginButtonsSession.get('configureLoginServiceDialogSaveDisabled');\n  }\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nvar capitalize = function (str) {\n  str = str == null ? '' : String(str);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\nTemplate._configureLoginOnDesktopDialog.helpers({\n  visible: function () {\n    return loginButtonsSession.get('configureOnDesktopVisible');\n  }\n});\nTemplate._configureLoginOnDesktopDialog.events({\n  'click #configure-on-desktop-dismiss-button': function () {\n    return loginButtonsSession.set('configureOnDesktopVisible', false);\n  }\n});","map":{"version":3,"names":["displayName","dropdown","validatePassword","module","link","v","loginButtonsSession","Accounts","_loginButtonsSession","doneCallback","onResetPasswordLink","token","done","set","onEnrollmentLink","onEmailVerificationLink","verifyEmail","error","Template","_resetPasswordDialog","events","click #login-buttons-reset-password-button","resetPassword","keypress #reset-password-new-password","event","keyCode","click #login-buttons-cancel-reset-password","resetMessages","newPassword","document","getElementById","value","get","errorMessage","reason","helpers","inResetPasswordFlow","_justResetPasswordDialog","click #just-verified-dismiss-button","visible","enrollAccount","password","_enrollAccountDialog","keypress #enroll-account-password","click #login-buttons-cancel-enroll-account","inEnrollAccountFlow","_justVerifiedEmailDialog","_loginButtonsMessagesDialog","click #messages-dialog-dismiss-button","hasMessage","_configureLoginServiceDialog","click .configure-login-service-dismiss-button","click #configure-login-service-dialog-save-configuration","serviceName","configuration","service","configurationFields","forEach","field","property","replace","inputs","slice","call","getElementsByTagName","loginStyle","querySelector","connection","result","Meteor","_debug","input, keyup input","target","id","indexOf","updateSaveDisabled","anyFieldEmpty","reduce","prev","templateForService","capitalize","template","fields","configurationSteps","saveDisabled","str","String","charAt","toUpperCase","_configureLoginOnDesktopDialog","click #configure-on-desktop-dismiss-button"],"sources":["packages/accounts-ui-unstyled/login_buttons_dialogs.js"],"sourcesContent":["import { displayName, dropdown, validatePassword } from './login_buttons.js';\n// for convenience\nconst loginButtonsSession = Accounts._loginButtonsSession;\n\n// since we don't want to pass around the callback that we get from our event\n// handlers, we just make it a variable for the whole file\nlet doneCallback;\n\nAccounts.onResetPasswordLink((token, done) => {\n  loginButtonsSession.set(\"resetPasswordToken\", token);\n  doneCallback = done;\n});\n\nAccounts.onEnrollmentLink((token, done) => {\n  loginButtonsSession.set(\"enrollAccountToken\", token);\n  doneCallback = done;\n});\n\nAccounts.onEmailVerificationLink((token, done) => {\n  Accounts.verifyEmail(token, error => {\n    if (! error) {\n      loginButtonsSession.set('justVerifiedEmail', true);\n    }\n\n    done();\n    // XXX show something if there was an error.\n  });\n});\n\n\n//\n// resetPasswordDialog template\n//\n\nTemplate._resetPasswordDialog.events({\n  'click #login-buttons-reset-password-button': () => resetPassword(),\n  'keypress #reset-password-new-password': event => {\n    if (event.keyCode === 13)\n      resetPassword();\n  },\n  'click #login-buttons-cancel-reset-password': () => {\n    loginButtonsSession.set('resetPasswordToken', null);\n    if (doneCallback)\n      doneCallback();\n  }\n});\n\nconst resetPassword = () => {\n  loginButtonsSession.resetMessages();\n  const newPassword = document.getElementById('reset-password-new-password').value;\n  if (!validatePassword(newPassword))\n    return;\n\n  Accounts.resetPassword(\n    loginButtonsSession.get('resetPasswordToken'), newPassword,\n    error => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('resetPasswordToken', null);\n        loginButtonsSession.set('justResetPassword', true);\n        if (doneCallback)\n          doneCallback();\n      }\n    });\n};\n\nTemplate._resetPasswordDialog.helpers({\n  displayName,\n  inResetPasswordFlow: () => loginButtonsSession.get('resetPasswordToken'),\n});\n\n//\n// justResetPasswordDialog template\n//\n\nTemplate._justResetPasswordDialog.events({\n  'click #just-verified-dismiss-button': () =>\n    loginButtonsSession.set('justResetPassword', false),\n});\n\nTemplate._justResetPasswordDialog.helpers({\n  visible: () => loginButtonsSession.get('justResetPassword'),\n  displayName,\n});\n\n\n\n//\n// enrollAccountDialog template\n//\n\nconst enrollAccount = () => {\n  loginButtonsSession.resetMessages();\n  const password = document.getElementById('enroll-account-password').value;\n  if (!validatePassword(password))\n    return;\n\n  Accounts.resetPassword(\n    loginButtonsSession.get('enrollAccountToken'), password,\n    error => {\n      if (error) {\n        loginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n      } else {\n        loginButtonsSession.set('enrollAccountToken', null);\n        if (doneCallback)\n          doneCallback();\n      }\n    });\n};\n\nTemplate._enrollAccountDialog.events({\n  'click #login-buttons-enroll-account-button': enrollAccount,\n  'keypress #enroll-account-password': event => {\n    if (event.keyCode === 13)\n      enrollAccount();\n  },\n  'click #login-buttons-cancel-enroll-account': () => {\n    loginButtonsSession.set('enrollAccountToken', null);\n    if (doneCallback)\n      doneCallback();\n  }\n});\n\nTemplate._enrollAccountDialog.helpers({\n  displayName,\n  inEnrollAccountFlow: () => loginButtonsSession.get('enrollAccountToken'),\n});\n\n\n//\n// justVerifiedEmailDialog template\n//\n\nTemplate._justVerifiedEmailDialog.events({\n  'click #just-verified-dismiss-button': () =>\n    loginButtonsSession.set('justVerifiedEmail', false),\n});\n\nTemplate._justVerifiedEmailDialog.helpers({\n  visible: () => loginButtonsSession.get('justVerifiedEmail'),\n  displayName,\n});\n\n\n//\n// loginButtonsMessagesDialog template\n//\n\nTemplate._loginButtonsMessagesDialog.events({\n  'click #messages-dialog-dismiss-button': () =>\n    loginButtonsSession.resetMessages(),\n});\n\nTemplate._loginButtonsMessagesDialog.helpers({\n  visible: () => {\n    const hasMessage = loginButtonsSession.get('infoMessage') || loginButtonsSession.get('errorMessage');\n    return !dropdown() && hasMessage;\n  }\n});\n\n\n//\n// configureLoginServiceDialog template\n//\n\nTemplate._configureLoginServiceDialog.events({\n  'click .configure-login-service-dismiss-button': () =>\n    loginButtonsSession.set('configureLoginServiceDialogVisible', false),\n  'click #configure-login-service-dialog-save-configuration': () => {\n    if (loginButtonsSession.get('configureLoginServiceDialogVisible') &&\n        ! loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')) {\n      // Prepare the configuration document for this login service\n      const serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n      const configuration = {\n        service: serviceName\n      };\n\n      // Fetch the value of each input field\n      configurationFields().forEach(field => {\n        configuration[field.property] = document.getElementById(\n          `configure-login-service-dialog-${field.property}`).value\n          .replace(/^\\s*|\\s*$/g, \"\"); // trim() doesnt work on IE8;\n      });\n\n      // Replacement of single use of jQuery in this package so we can remove\n      // the dependency\n      const inputs = [].slice.call( // Because HTMLCollections aren't arrays\n        document\n          .getElementById('configure-login-service-dialog')\n          .getElementsByTagName('input')\n      );\n\n      configuration.loginStyle =\n        document.querySelector('#configure-login-service-dialog input[name=\"loginStyle\"]:checked').value;\n\n      // Configure this login service\n      Accounts.connection.call(\n        \"configureLoginService\", configuration, (error, result) => {\n          if (error)\n            Meteor._debug(`Error configuring login service ${serviceName}`,\n                          error);\n          else\n            loginButtonsSession.set('configureLoginServiceDialogVisible',\n                                    false);\n        });\n    }\n  },\n  // IE8 doesn't support the 'input' event, so we'll run this on the keyup as\n  // well. (Keeping the 'input' event means that this also fires when you use\n  // the mouse to change the contents of the field, eg 'Cut' menu item.)\n  'input, keyup input': event => {\n    // if the event fired on one of the configuration input fields,\n    // check whether we should enable the 'save configuration' button\n    if (event.target.id.indexOf('configure-login-service-dialog') === 0)\n      updateSaveDisabled();\n  }\n});\n\n// check whether the 'save configuration' button should be enabled.\n// this is a really strange way to implement this and a Forms\n// Abstraction would make all of this reactive, and simpler.\nconst updateSaveDisabled = () => {\n  const anyFieldEmpty = configurationFields().reduce((prev, field) =>\n    prev || document.getElementById(\n      `configure-login-service-dialog-${field.property}`\n    ).value === '',\n    false\n  );\n\n  loginButtonsSession.set('configureLoginServiceDialogSaveDisabled', anyFieldEmpty);\n};\n\n// Returns the appropriate template for this login service.  This\n// template should be defined in the service's package\nTemplate._configureLoginServiceDialog.templateForService = serviceName => {\n  serviceName = serviceName || loginButtonsSession.get('configureLoginServiceDialogServiceName');\n  // XXX Service providers should be able to specify their configuration\n  // template name.\n  return Template[`configureLoginServiceDialogFor${\n                  serviceName === 'meteor-developer' ?\n                   'MeteorDeveloper' :\n                   capitalize(serviceName)}`];\n};\n\nconst configurationFields = () => {\n  const template = Template._configureLoginServiceDialog.templateForService();\n  return template.fields();\n};\n\nTemplate._configureLoginServiceDialog.helpers({\n  configurationFields,\n  visible: () => loginButtonsSession.get('configureLoginServiceDialogVisible'),\n  // renders the appropriate template\n  configurationSteps: () =>\n    Template._configureLoginServiceDialog.templateForService(),\n  saveDisabled: () =>\n    loginButtonsSession.get('configureLoginServiceDialogSaveDisabled'),\n});\n\n// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\nconst capitalize = str => {\n  str = str == null ? '' : String(str);\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\nTemplate._configureLoginOnDesktopDialog.helpers({\n  visible: () => loginButtonsSession.get('configureOnDesktopVisible'),\n});\n\nTemplate._configureLoginOnDesktopDialog.events({\n  'click #configure-on-desktop-dismiss-button': () =>\n    loginButtonsSession.set('configureOnDesktopVisible', false),\n});\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"5f6db5126634fa77c330d0c3cb0ae074daaa6139"}
