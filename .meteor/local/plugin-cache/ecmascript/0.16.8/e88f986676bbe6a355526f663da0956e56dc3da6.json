{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"D:\\mergerware\\loan-management-app\\packages\\htmljs\\visitors.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"packages/htmljs/visitors.js","filename":"D:\\mergerware\\loan-management-app\\packages\\htmljs\\visitors.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"D:\\mergerware\\loan-management-app","root":"D:\\mergerware\\loan-management-app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"D:\\mergerware\\loan-management-app\\packages\\htmljs\\visitors.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/htmljs/visitors.js"}},"code":"module.export({\n  Visitor: () => Visitor,\n  TransformingVisitor: () => TransformingVisitor,\n  ToTextVisitor: () => ToTextVisitor,\n  ToHTMLVisitor: () => ToHTMLVisitor,\n  toHTML: () => toHTML,\n  TEXTMODE: () => TEXTMODE,\n  toText: () => toText\n});\nlet Tag, CharRef, Comment, Raw, isArray, getTag, isConstructedObject, flattenAttributes, isVoidElement;\nmodule.link(\"./html\", {\n  Tag(v) {\n    Tag = v;\n  },\n  CharRef(v) {\n    CharRef = v;\n  },\n  Comment(v) {\n    Comment = v;\n  },\n  Raw(v) {\n    Raw = v;\n  },\n  isArray(v) {\n    isArray = v;\n  },\n  getTag(v) {\n    getTag = v;\n  },\n  isConstructedObject(v) {\n    isConstructedObject = v;\n  },\n  flattenAttributes(v) {\n    flattenAttributes = v;\n  },\n  isVoidElement(v) {\n    isVoidElement = v;\n  }\n}, 0);\nvar IDENTITY = function (x) {\n  return x;\n};\n\n// _assign is like _.extend or the upcoming Object.assign.\n// Copy src's own, enumerable properties onto tgt and return\n// tgt.\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nvar _assign = function (tgt, src) {\n  for (var k in src) {\n    if (_hasOwnProperty.call(src, k)) tgt[k] = src[k];\n  }\n  return tgt;\n};\nconst Visitor = function (props) {\n  _assign(this, props);\n};\nVisitor.def = function (options) {\n  _assign(this.prototype, options);\n};\nVisitor.extend = function (options) {\n  var curType = this;\n  var subType = function HTMLVisitorSubtype( /*arguments*/\n  ) {\n    Visitor.apply(this, arguments);\n  };\n  subType.prototype = new curType();\n  subType.extend = curType.extend;\n  subType.def = curType.def;\n  if (options) _assign(subType.prototype, options);\n  return subType;\n};\nVisitor.def({\n  visit: function (content /*, ...*/) {\n    if (content == null)\n      // null or undefined.\n      return this.visitNull.apply(this, arguments);\n    if (typeof content === 'object') {\n      if (content.htmljsType) {\n        switch (content.htmljsType) {\n          case Tag.htmljsType:\n            return this.visitTag.apply(this, arguments);\n          case CharRef.htmljsType:\n            return this.visitCharRef.apply(this, arguments);\n          case Comment.htmljsType:\n            return this.visitComment.apply(this, arguments);\n          case Raw.htmljsType:\n            return this.visitRaw.apply(this, arguments);\n          default:\n            throw new Error(\"Unknown htmljs type: \" + content.htmljsType);\n        }\n      }\n      if (isArray(content)) return this.visitArray.apply(this, arguments);\n      return this.visitObject.apply(this, arguments);\n    } else if (typeof content === 'string' || typeof content === 'boolean' || typeof content === 'number') {\n      return this.visitPrimitive.apply(this, arguments);\n    } else if (typeof content === 'function') {\n      return this.visitFunction.apply(this, arguments);\n    }\n    throw new Error(\"Unexpected object in htmljs: \" + content);\n  },\n  visitNull: function (nullOrUndefined /*, ...*/) {},\n  visitPrimitive: function (stringBooleanOrNumber /*, ...*/) {},\n  visitArray: function (array /*, ...*/) {},\n  visitComment: function (comment /*, ...*/) {},\n  visitCharRef: function (charRef /*, ...*/) {},\n  visitRaw: function (raw /*, ...*/) {},\n  visitTag: function (tag /*, ...*/) {},\n  visitObject: function (obj /*, ...*/) {\n    throw new Error(\"Unexpected object in htmljs: \" + obj);\n  },\n  visitFunction: function (fn /*, ...*/) {\n    throw new Error(\"Unexpected function in htmljs: \" + fn);\n  }\n});\nconst TransformingVisitor = Visitor.extend();\nTransformingVisitor.def({\n  visitNull: IDENTITY,\n  visitPrimitive: IDENTITY,\n  visitArray: function (array) {\n    var result = array;\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    for (var i = 0; i < array.length; i++) {\n      var oldItem = array[i];\n      var newItem = this.visit(oldItem, ...args);\n      if (newItem !== oldItem) {\n        // copy `array` on write\n        if (result === array) result = array.slice();\n        result[i] = newItem;\n      }\n    }\n    return result;\n  },\n  visitComment: IDENTITY,\n  visitCharRef: IDENTITY,\n  visitRaw: IDENTITY,\n  visitObject: function (obj) {\n    // Don't parse Markdown & RCData as HTML\n    if (obj.textMode != null) {\n      return obj;\n    }\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    if ('content' in obj) {\n      obj.content = this.visit(obj.content, ...args);\n    }\n    if ('elseContent' in obj) {\n      obj.elseContent = this.visit(obj.elseContent, ...args);\n    }\n    return obj;\n  },\n  visitFunction: IDENTITY,\n  visitTag: function (tag) {\n    var oldChildren = tag.children;\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    var newChildren = this.visitChildren(oldChildren, ...args);\n    var oldAttrs = tag.attrs;\n    var newAttrs = this.visitAttributes(oldAttrs, ...args);\n    if (newAttrs === oldAttrs && newChildren === oldChildren) return tag;\n    var newTag = getTag(tag.tagName).apply(null, newChildren);\n    newTag.attrs = newAttrs;\n    return newTag;\n  },\n  visitChildren: function (children) {\n    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      args[_key4 - 1] = arguments[_key4];\n    }\n    return this.visitArray(children, ...args);\n  },\n  // Transform the `.attrs` property of a tag, which may be a dictionary,\n  // an array, or in some uses, a foreign object (such as\n  // a template tag).\n  visitAttributes: function (attrs) {\n    for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n      args[_key5 - 1] = arguments[_key5];\n    }\n    if (isArray(attrs)) {\n      var result = attrs;\n      for (var i = 0; i < attrs.length; i++) {\n        var oldItem = attrs[i];\n        var newItem = this.visitAttributes(oldItem, ...args);\n        if (newItem !== oldItem) {\n          // copy on write\n          if (result === attrs) result = attrs.slice();\n          result[i] = newItem;\n        }\n      }\n      return result;\n    }\n    if (attrs && isConstructedObject(attrs)) {\n      throw new Error(\"The basic TransformingVisitor does not support \" + \"foreign objects in attributes.  Define a custom \" + \"visitAttributes for this case.\");\n    }\n    var oldAttrs = attrs;\n    var newAttrs = oldAttrs;\n    if (oldAttrs) {\n      var attrArgs = [null, null];\n      attrArgs.push.apply(attrArgs, arguments);\n      for (var k in oldAttrs) {\n        var oldValue = oldAttrs[k];\n        attrArgs[0] = k;\n        attrArgs[1] = oldValue;\n        var newValue = this.visitAttribute.apply(this, attrArgs);\n        if (newValue !== oldValue) {\n          // copy on write\n          if (newAttrs === oldAttrs) newAttrs = _assign({}, oldAttrs);\n          newAttrs[k] = newValue;\n        }\n      }\n    }\n    return newAttrs;\n  },\n  // Transform the value of one attribute name/value in an\n  // attributes dictionary.\n  visitAttribute: function (name, value, tag) {\n    for (var _len6 = arguments.length, args = new Array(_len6 > 3 ? _len6 - 3 : 0), _key6 = 3; _key6 < _len6; _key6++) {\n      args[_key6 - 3] = arguments[_key6];\n    }\n    return this.visit(value, ...args);\n  }\n});\nconst ToTextVisitor = Visitor.extend();\nToTextVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    if (this.textMode === TEXTMODE.RCDATA) {\n      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n    } else if (this.textMode === TEXTMODE.ATTRIBUTE) {\n      // escape `&` and `\"` this time, not `&` and `<`\n      return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n    } else {\n      return str;\n    }\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++) parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    throw new Error(\"Can't have a comment here\");\n  },\n  visitCharRef: function (charRef) {\n    if (this.textMode === TEXTMODE.RCDATA || this.textMode === TEXTMODE.ATTRIBUTE) {\n      return charRef.html;\n    } else {\n      return charRef.str;\n    }\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    // Really we should just disallow Tags here.  However, at the\n    // moment it's useful to stringify any HTML we find.  In\n    // particular, when you include a template within `{{#markdown}}`,\n    // we render the template as text, and since there's currently\n    // no way to make the template be *parsed* as text (e.g. `<template\n    // type=\"text\">`), we hackishly support HTML tags in markdown\n    // in templates by parsing them and stringifying them.\n    return this.visit(this.toHTML(tag));\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toText: \" + x);\n  },\n  toHTML: function (node) {\n    return toHTML(node);\n  }\n});\nconst ToHTMLVisitor = Visitor.extend();\nToHTMLVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++) parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    return '<!--' + comment.sanitizedValue + '-->';\n  },\n  visitCharRef: function (charRef) {\n    return charRef.html;\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    var attrStrs = [];\n    var tagName = tag.tagName;\n    var children = tag.children;\n    var attrs = tag.attrs;\n    if (attrs) {\n      attrs = flattenAttributes(attrs);\n      for (var k in attrs) {\n        if (k === 'value' && tagName === 'textarea') {\n          children = [attrs[k], children];\n        } else {\n          var v = this.toText(attrs[k], TEXTMODE.ATTRIBUTE);\n          attrStrs.push(' ' + k + '=\"' + v + '\"');\n        }\n      }\n    }\n    var startTag = '<' + tagName + attrStrs.join('') + '>';\n    var childStrs = [];\n    var content;\n    if (tagName === 'textarea') {\n      for (var i = 0; i < children.length; i++) childStrs.push(this.toText(children[i], TEXTMODE.RCDATA));\n      content = childStrs.join('');\n      if (content.slice(0, 1) === '\\n')\n        // TEXTAREA will absorb a newline, so if we see one, add\n        // another one.\n        content = '\\n' + content;\n    } else {\n      for (var i = 0; i < children.length; i++) childStrs.push(this.visit(children[i]));\n      content = childStrs.join('');\n    }\n    var result = startTag + content;\n    if (children.length || !isVoidElement(tagName)) {\n      // \"Void\" elements like BR are the only ones that don't get a close\n      // tag in HTML5.  They shouldn't have contents, either, so we could\n      // throw an error upon seeing contents here.\n      result += '</' + tagName + '>';\n    }\n    return result;\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toHTML: \" + x);\n  },\n  toText: function (node, textMode) {\n    return toText(node, textMode);\n  }\n});\n\n////////////////////////////// TOHTML\n\nfunction toHTML(content) {\n  return new ToHTMLVisitor().visit(content);\n}\nconst TEXTMODE = {\n  STRING: 1,\n  RCDATA: 2,\n  ATTRIBUTE: 3\n};\nfunction toText(content, textMode) {\n  if (!textMode) throw new Error(\"textMode required for HTML.toText\");\n  if (!(textMode === TEXTMODE.STRING || textMode === TEXTMODE.RCDATA || textMode === TEXTMODE.ATTRIBUTE)) throw new Error(\"Unknown textMode: \" + textMode);\n  var visitor = new ToTextVisitor({\n    textMode: textMode\n  });\n  return visitor.visit(content);\n}","map":{"version":3,"names":["module","export","Visitor","TransformingVisitor","ToTextVisitor","ToHTMLVisitor","toHTML","TEXTMODE","toText","Tag","CharRef","Comment","Raw","isArray","getTag","isConstructedObject","flattenAttributes","isVoidElement","link","v","IDENTITY","x","_hasOwnProperty","Object","prototype","hasOwnProperty","_assign","tgt","src","k","call","props","def","options","extend","curType","subType","HTMLVisitorSubtype","apply","arguments","visit","content","visitNull","htmljsType","visitTag","visitCharRef","visitComment","visitRaw","Error","visitArray","visitObject","visitPrimitive","visitFunction","nullOrUndefined","stringBooleanOrNumber","array","comment","charRef","raw","tag","obj","fn","result","_len","length","args","Array","_key","i","oldItem","newItem","slice","textMode","_len2","_key2","elseContent","oldChildren","children","_len3","_key3","newChildren","visitChildren","oldAttrs","attrs","newAttrs","visitAttributes","newTag","tagName","_len4","_key4","_len5","_key5","attrArgs","push","oldValue","newValue","visitAttribute","name","value","_len6","_key6","str","String","RCDATA","replace","ATTRIBUTE","parts","join","html","node","sanitizedValue","attrStrs","startTag","childStrs","STRING","visitor"],"sources":["packages/htmljs/visitors.js"],"sourcesContent":["import {\n  Tag,\n  CharRef,\n  Comment,\n  Raw,\n  isArray,\n  getTag,\n  isConstructedObject,\n  flattenAttributes,\n  isVoidElement,\n} from './html';\n\n\nvar IDENTITY = function (x) { return x; };\n\n// _assign is like _.extend or the upcoming Object.assign.\n// Copy src's own, enumerable properties onto tgt and return\n// tgt.\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nvar _assign = function (tgt, src) {\n  for (var k in src) {\n    if (_hasOwnProperty.call(src, k))\n      tgt[k] = src[k];\n  }\n  return tgt;\n};\n\nexport const Visitor = function (props) {\n  _assign(this, props);\n};\n\nVisitor.def = function (options) {\n  _assign(this.prototype, options);\n};\n\nVisitor.extend = function (options) {\n  var curType = this;\n  var subType = function HTMLVisitorSubtype(/*arguments*/) {\n    Visitor.apply(this, arguments);\n  };\n  subType.prototype = new curType;\n  subType.extend = curType.extend;\n  subType.def = curType.def;\n  if (options)\n    _assign(subType.prototype, options);\n  return subType;\n};\n\nVisitor.def({\n  visit: function (content/*, ...*/) {\n    if (content == null)\n      // null or undefined.\n      return this.visitNull.apply(this, arguments);\n\n    if (typeof content === 'object') {\n      if (content.htmljsType) {\n        switch (content.htmljsType) {\n        case Tag.htmljsType:\n          return this.visitTag.apply(this, arguments);\n        case CharRef.htmljsType:\n          return this.visitCharRef.apply(this, arguments);\n        case Comment.htmljsType:\n          return this.visitComment.apply(this, arguments);\n        case Raw.htmljsType:\n          return this.visitRaw.apply(this, arguments);\n        default:\n          throw new Error(\"Unknown htmljs type: \" + content.htmljsType);\n        }\n      }\n\n      if (isArray(content))\n        return this.visitArray.apply(this, arguments);\n\n      return this.visitObject.apply(this, arguments);\n\n    } else if ((typeof content === 'string') ||\n               (typeof content === 'boolean') ||\n               (typeof content === 'number')) {\n      return this.visitPrimitive.apply(this, arguments);\n\n    } else if (typeof content === 'function') {\n      return this.visitFunction.apply(this, arguments);\n    }\n\n    throw new Error(\"Unexpected object in htmljs: \" + content);\n\n  },\n  visitNull: function (nullOrUndefined/*, ...*/) {},\n  visitPrimitive: function (stringBooleanOrNumber/*, ...*/) {},\n  visitArray: function (array/*, ...*/) {},\n  visitComment: function (comment/*, ...*/) {},\n  visitCharRef: function (charRef/*, ...*/) {},\n  visitRaw: function (raw/*, ...*/) {},\n  visitTag: function (tag/*, ...*/) {},\n  visitObject: function (obj/*, ...*/) {\n    throw new Error(\"Unexpected object in htmljs: \" + obj);\n  },\n  visitFunction: function (fn/*, ...*/) {\n    throw new Error(\"Unexpected function in htmljs: \" + fn);\n  }\n});\n\nexport const TransformingVisitor = Visitor.extend();\nTransformingVisitor.def({\n  visitNull: IDENTITY,\n  visitPrimitive: IDENTITY,\n  visitArray: function (array, ...args) {\n    var result = array;\n    for (var i = 0; i < array.length; i++) {\n      var oldItem = array[i];\n      var newItem = this.visit(oldItem, ...args);\n      if (newItem !== oldItem) {\n        // copy `array` on write\n        if (result === array)\n          result = array.slice();\n        result[i] = newItem;\n      }\n    }\n    return result;\n  },\n  visitComment: IDENTITY,\n  visitCharRef: IDENTITY,\n  visitRaw: IDENTITY,\n  visitObject: function(obj, ...args){\n    // Don't parse Markdown & RCData as HTML\n    if (obj.textMode != null){\n      return obj;\n    }\n    if ('content' in obj) {\n      obj.content = this.visit(obj.content, ...args);\n    }\n    if ('elseContent' in obj){\n      obj.elseContent = this.visit(obj.elseContent, ...args);\n    }\n    return obj;\n  },\n  visitFunction: IDENTITY,\n  visitTag: function (tag, ...args) {\n    var oldChildren = tag.children;\n    var newChildren = this.visitChildren(oldChildren, ...args);\n\n    var oldAttrs = tag.attrs;\n    var newAttrs = this.visitAttributes(oldAttrs, ...args);\n\n    if (newAttrs === oldAttrs && newChildren === oldChildren)\n      return tag;\n\n    var newTag = getTag(tag.tagName).apply(null, newChildren);\n    newTag.attrs = newAttrs;\n    return newTag;\n  },\n  visitChildren: function (children, ...args) {\n    return this.visitArray(children, ...args);\n  },\n  // Transform the `.attrs` property of a tag, which may be a dictionary,\n  // an array, or in some uses, a foreign object (such as\n  // a template tag).\n  visitAttributes: function (attrs, ...args) {\n    if (isArray(attrs)) {\n      var result = attrs;\n      for (var i = 0; i < attrs.length; i++) {\n        var oldItem = attrs[i];\n        var newItem = this.visitAttributes(oldItem, ...args);\n        if (newItem !== oldItem) {\n          // copy on write\n          if (result === attrs)\n            result = attrs.slice();\n          result[i] = newItem;\n        }\n      }\n      return result;\n    }\n\n    if (attrs && isConstructedObject(attrs)) {\n      throw new Error(\"The basic TransformingVisitor does not support \" +\n                      \"foreign objects in attributes.  Define a custom \" +\n                      \"visitAttributes for this case.\");\n    }\n\n    var oldAttrs = attrs;\n    var newAttrs = oldAttrs;\n    if (oldAttrs) {\n      var attrArgs = [null, null];\n      attrArgs.push.apply(attrArgs, arguments);\n      for (var k in oldAttrs) {\n        var oldValue = oldAttrs[k];\n        attrArgs[0] = k;\n        attrArgs[1] = oldValue;\n        var newValue = this.visitAttribute.apply(this, attrArgs);\n        if (newValue !== oldValue) {\n          // copy on write\n          if (newAttrs === oldAttrs)\n            newAttrs = _assign({}, oldAttrs);\n          newAttrs[k] = newValue;\n        }\n      }\n    }\n\n    return newAttrs;\n  },\n  // Transform the value of one attribute name/value in an\n  // attributes dictionary.\n  visitAttribute: function (name, value, tag, ...args) {\n    return this.visit(value, ...args);\n  }\n});\n\n\nexport const ToTextVisitor = Visitor.extend();\nToTextVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    if (this.textMode === TEXTMODE.RCDATA) {\n      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n    } else if (this.textMode === TEXTMODE.ATTRIBUTE) {\n      // escape `&` and `\"` this time, not `&` and `<`\n      return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n    } else {\n      return str;\n    }\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++)\n      parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    throw new Error(\"Can't have a comment here\");\n  },\n  visitCharRef: function (charRef) {\n    if (this.textMode === TEXTMODE.RCDATA ||\n        this.textMode === TEXTMODE.ATTRIBUTE) {\n      return charRef.html;\n    } else {\n      return charRef.str;\n    }\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    // Really we should just disallow Tags here.  However, at the\n    // moment it's useful to stringify any HTML we find.  In\n    // particular, when you include a template within `{{#markdown}}`,\n    // we render the template as text, and since there's currently\n    // no way to make the template be *parsed* as text (e.g. `<template\n    // type=\"text\">`), we hackishly support HTML tags in markdown\n    // in templates by parsing them and stringifying them.\n    return this.visit(this.toHTML(tag));\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toText: \" + x);\n  },\n  toHTML: function (node) {\n    return toHTML(node);\n  }\n});\n\n\n\nexport const ToHTMLVisitor = Visitor.extend();\nToHTMLVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++)\n      parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    return '<!--' + comment.sanitizedValue + '-->';\n  },\n  visitCharRef: function (charRef) {\n    return charRef.html;\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    var attrStrs = [];\n\n    var tagName = tag.tagName;\n    var children = tag.children;\n\n    var attrs = tag.attrs;\n    if (attrs) {\n      attrs = flattenAttributes(attrs);\n      for (var k in attrs) {\n        if (k === 'value' && tagName === 'textarea') {\n          children = [attrs[k], children];\n        } else {\n          var v = this.toText(attrs[k], TEXTMODE.ATTRIBUTE);\n          attrStrs.push(' ' + k + '=\"' + v + '\"');\n        }\n      }\n    }\n\n    var startTag = '<' + tagName + attrStrs.join('') + '>';\n\n    var childStrs = [];\n    var content;\n    if (tagName === 'textarea') {\n\n      for (var i = 0; i < children.length; i++)\n        childStrs.push(this.toText(children[i], TEXTMODE.RCDATA));\n\n      content = childStrs.join('');\n      if (content.slice(0, 1) === '\\n')\n        // TEXTAREA will absorb a newline, so if we see one, add\n        // another one.\n        content = '\\n' + content;\n\n    } else {\n      for (var i = 0; i < children.length; i++)\n        childStrs.push(this.visit(children[i]));\n\n      content = childStrs.join('');\n    }\n\n    var result = startTag + content;\n\n    if (children.length || ! isVoidElement(tagName)) {\n      // \"Void\" elements like BR are the only ones that don't get a close\n      // tag in HTML5.  They shouldn't have contents, either, so we could\n      // throw an error upon seeing contents here.\n      result += '</' + tagName + '>';\n    }\n\n    return result;\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toHTML: \" + x);\n  },\n  toText: function (node, textMode) {\n    return toText(node, textMode);\n  }\n});\n\n\n\n////////////////////////////// TOHTML\n\nexport function toHTML(content) {\n  return (new ToHTMLVisitor).visit(content);\n}\n\n// Escaping modes for outputting text when generating HTML.\nexport const TEXTMODE = {\n  STRING: 1,\n  RCDATA: 2,\n  ATTRIBUTE: 3\n};\n\n\nexport function toText(content, textMode) {\n  if (! textMode)\n    throw new Error(\"textMode required for HTML.toText\");\n  if (! (textMode === TEXTMODE.STRING ||\n         textMode === TEXTMODE.RCDATA ||\n         textMode === TEXTMODE.ATTRIBUTE))\n    throw new Error(\"Unknown textMode: \" + textMode);\n\n  var visitor = new ToTextVisitor({textMode: textMode});\n  return visitor.visit(content);\n}\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"e88f986676bbe6a355526f663da0956e56dc3da6"}
